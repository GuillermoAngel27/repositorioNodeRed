[
    {
        "id": "914561935ad721a6",
        "type": "tab",
        "label": "fljEjemplo",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2925a6e260508c9e",
        "type": "tab",
        "label": "FlowSwitchCase",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6a8ca940c6daf368",
        "type": "tab",
        "label": "table-ui-simple-examples",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "af2dccf9.e88c5",
        "type": "tab",
        "label": "webServicesImprime",
        "disabled": false,
        "info": ""
    },
    {
        "id": "321a82c8d15c0c43",
        "type": "tab",
        "label": "flwDemo",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "281fcb369639668d",
        "type": "tab",
        "label": "createTicket",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "86122041a3705953",
        "type": "tab",
        "label": "CreateTicketPension",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2a8d06e593a2285c",
        "type": "tab",
        "label": "payTicket",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a74a8b3a13ece5db",
        "type": "tab",
        "label": "validateOut",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "54a0b3a48a874218",
        "type": "tab",
        "label": "Ejemplo de Web Services",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "aed7fdab8a3bd4f2",
        "type": "tab",
        "label": "flwIndicadorEstacionamiento",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "55ba811a.d1969",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "0cd476c06e8fa6b2",
        "type": "subflow",
        "name": "subCnnBD",
        "info": "Conexión con base de datos SCAP",
        "category": "",
        "in": [
            {
                "x": 358,
                "y": 140,
                "wires": [
                    {
                        "id": "6800462c10826a9c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 660,
                "y": 140,
                "wires": [
                    {
                        "id": "6800462c10826a9c",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "f03057dae7955163",
        "type": "subflow",
        "name": "subFlwBuscarDisponibilidad",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 180,
                "wires": [
                    {
                        "id": "3c6d057f4338108f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1320,
                "y": 360,
                "wires": [
                    {
                        "id": "3fc89ad098644bab",
                        "port": 0
                    },
                    {
                        "id": "881c415b2ac71ab0",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red/watch.svg"
    },
    {
        "id": "89c1aad203a427f8",
        "type": "subflow",
        "name": "SubflwCambiarEstatusEst",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "7401253026624c7c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1260,
                "y": 140,
                "wires": [
                    {
                        "id": "09a5490d1c19f47c",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#E6E0F8",
        "icon": "node-red/switch.svg"
    },
    {
        "id": "f6610e3b2387ac5c",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#9d009d",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#a91f9b",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#9d009d",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#9d009d",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#e900e9",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#9d009d",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "deep-purple",
                "accents": "red",
                "warn": "light-green",
                "background": "light-green",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "menu",
            "lockMenu": "false",
            "allowTempTheme": "none",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 58,
                "sy": 27,
                "gx": 6,
                "gy": 6,
                "cx": 23,
                "cy": 34,
                "px": 12,
                "py": 12
            }
        }
    },
    {
        "id": "dc623b65c0c2322d",
        "type": "ui_group",
        "name": "Consulta Activos",
        "tab": "8e3cf5bbb0f3e9ae",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8e3cf5bbb0f3e9ae",
        "type": "ui_tab",
        "name": "Muestra de Activos",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5f375bf4a9c45793",
        "type": "ui_group",
        "name": "Estatus de Activos",
        "tab": "8e3cf5bbb0f3e9ae",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "da7ce3b14c371164",
        "type": "ui_group",
        "name": "Muestra de los Estatus",
        "tab": "8e3cf5bbb0f3e9ae",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4e6391d8c98cfc1b",
        "type": "ui_tab",
        "name": "Demo Estacionamiento",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "74a72f06f78e90a3",
        "type": "ui_group",
        "name": "Demo Estacionamiento",
        "tab": "4e6391d8c98cfc1b",
        "order": 2,
        "disp": true,
        "width": "7",
        "collapse": false,
        "className": ""
    },
    {
        "id": "83b85919b2dac752",
        "type": "MySQLdatabase",
        "name": "",
        "host": "127.0.0.1",
        "port": "3306",
        "db": "parkingtaq",
        "tz": "",
        "charset": "UTF8"
    },
    {
        "id": "931188c4fcf02977",
        "type": "ui_group",
        "name": "Buttons",
        "tab": "15b3a67c9e62c8ba",
        "order": 14,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "20612df8fb62aba8",
        "type": "ui_group",
        "name": "Resultado",
        "tab": "15b3a67c9e62c8ba",
        "order": 8,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "15b3a67c9e62c8ba",
        "type": "ui_tab",
        "name": "PRUEBA DASHBOARD",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f5521a450a3381b3",
        "type": "ui_group",
        "name": "Ingresa Datos",
        "tab": "4e6391d8c98cfc1b",
        "order": 1,
        "disp": true,
        "width": "3",
        "collapse": false,
        "className": ""
    },
    {
        "id": "571a38b1.5e3638",
        "type": "ui_group",
        "name": "Richer Table",
        "tab": "29ec6908.552b36",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9ed850cc3dc8e082",
        "type": "ui_group",
        "name": "Simple",
        "tab": "29ec6908.552b36",
        "order": 1,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "29ec6908.552b36",
        "type": "ui_tab",
        "name": "Home",
        "icon": "track_changes",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "57ae5db0698d768f",
        "type": "ui_group",
        "name": "Resultado Venta",
        "tab": "4e6391d8c98cfc1b",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "802eaec04a393b82",
        "type": "ui_tab",
        "name": "EstacionamientoCompleto",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e9dac18c3e8fef5a",
        "type": "ui_group",
        "name": "Create Ticket Normal (Hora)",
        "tab": "802eaec04a393b82",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8135167c221b806c",
        "type": "ui_group",
        "name": "Pay Ticket",
        "tab": "802eaec04a393b82",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "25b503f9b6a954f4",
        "type": "ui_group",
        "name": "Out Parking",
        "tab": "802eaec04a393b82",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "dadfe6c80b9c9c3a",
        "type": "ui_group",
        "name": "Lugares Disponibles",
        "tab": "802eaec04a393b82",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "481533c8.0110ec",
        "type": "ui_group",
        "name": "ESP8266 Relay Control x4",
        "tab": "3695a7e.2f63558",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "3695a7e.2f63558",
        "type": "ui_tab",
        "name": "Principal",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6800462c10826a9c",
        "type": "mysql",
        "z": "0cd476c06e8fa6b2",
        "mydb": "83b85919b2dac752",
        "name": "",
        "x": 510,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "097aa0f66c6ec759",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "f03057dae7955163",
        "name": "",
        "x": 210,
        "y": 220,
        "wires": [
            [
                "7d65a21977ee44e9"
            ]
        ]
    },
    {
        "id": "db11ed9914c16fd7",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 180,
        "wires": [
            [
                "097aa0f66c6ec759"
            ]
        ]
    },
    {
        "id": "2d0b6dcdbfde5be3",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "f03057dae7955163",
        "name": "",
        "x": 790,
        "y": 180,
        "wires": [
            [
                "464783614142c8c4",
                "0646387c5fd82733"
            ]
        ]
    },
    {
        "id": "218b675a51fafc35",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "subBuscarDisponibilidadEst",
        "func": "\nmsg.topic = `select * from lugares_est where estatus = 'DISPONIBLE' AND idLugar between  1 AND 30  limit 1;`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 180,
        "wires": [
            [
                "2d0b6dcdbfde5be3"
            ]
        ]
    },
    {
        "id": "464783614142c8c4",
        "type": "debug",
        "z": "f03057dae7955163",
        "name": "debug 33",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 960,
        "y": 100,
        "wires": []
    },
    {
        "id": "be663dcb5a8d3a56",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "f03057dae7955163",
        "name": "",
        "x": 370,
        "y": 180,
        "wires": [
            [
                "218b675a51fafc35"
            ]
        ]
    },
    {
        "id": "3c6d057f4338108f",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "fnLockTable",
        "func": "\nmsg.topic = `lock table lugares_est read;`;\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 210,
        "y": 180,
        "wires": [
            [
                "be663dcb5a8d3a56"
            ]
        ]
    },
    {
        "id": "0646387c5fd82733",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "fnDeclaraVarGlobNumEst",
        "func": "var numEst = msg.payload && msg.payload[0] && msg.payload[0].idLugar;\n\nglobal.set(\"gblNumEst\", numEst);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 180,
        "wires": [
            [
                "db11ed9914c16fd7"
            ]
        ]
    },
    {
        "id": "3fc89ad098644bab",
        "type": "ui_toast",
        "z": "f03057dae7955163",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1130,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "d44b86d020084124",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "function 46",
        "func": "if(msg.verdadero == false){\n    msg.topic = 'Notificación Estacionamiento';\n    msg.payload = 'No hay Lugar Disponible en el Estacionamiento, Volver mas Tarde';\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 420,
        "wires": [
            [
                "3fc89ad098644bab"
            ]
        ]
    },
    {
        "id": "881c415b2ac71ab0",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "function 47",
        "func": "if (msg.verdadero = true){\n    msg.payload = true;\n    msg.respuesta = global.get(\"gblNumEst\")\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 380,
        "wires": [
            [
                "317b36e226ddead0"
            ]
        ]
    },
    {
        "id": "317b36e226ddead0",
        "type": "debug",
        "z": "f03057dae7955163",
        "name": "debug respuesta",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "respuesta",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 300,
        "wires": []
    },
    {
        "id": "84f30a1b3c32bbc4",
        "type": "switch",
        "z": "f03057dae7955163",
        "name": "",
        "property": "verdadero",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 400,
        "wires": [
            [
                "881c415b2ac71ab0"
            ],
            [
                "d44b86d020084124"
            ]
        ]
    },
    {
        "id": "7d65a21977ee44e9",
        "type": "function",
        "z": "f03057dae7955163",
        "name": "function 48",
        "func": "var srcNumEst = global.get(\"gblNumEst\");\n\nif (srcNumEst !== undefined) {\n    msg.verdadero = true;\n} else {\n    msg.verdadero = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 220,
        "wires": [
            [
                "84f30a1b3c32bbc4"
            ]
        ]
    },
    {
        "id": "09a5490d1c19f47c",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "89c1aad203a427f8",
        "name": "",
        "x": 1130,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "5336031fdec08e78",
        "type": "function",
        "z": "89c1aad203a427f8",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 140,
        "wires": [
            [
                "09a5490d1c19f47c"
            ]
        ]
    },
    {
        "id": "6ab9a5ae03f54cfa",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "89c1aad203a427f8",
        "name": "",
        "x": 730,
        "y": 140,
        "wires": [
            [
                "3e28826ba6a6a8cf",
                "5336031fdec08e78"
            ]
        ]
    },
    {
        "id": "858b8f2e5faacfe8",
        "type": "function",
        "z": "89c1aad203a427f8",
        "name": "fnCambiarEstatusEst",
        "func": "var numEst = global.get(\"gblNumEst\")\nmsg.topic = `UPDATE lugares_Est set estatus ='OCUPADO' WHERE idlugar=${numEst};`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 140,
        "wires": [
            [
                "6ab9a5ae03f54cfa"
            ]
        ]
    },
    {
        "id": "3e28826ba6a6a8cf",
        "type": "debug",
        "z": "89c1aad203a427f8",
        "name": "debug 34",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 60,
        "wires": []
    },
    {
        "id": "0b0785a15c45f43b",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "89c1aad203a427f8",
        "name": "",
        "x": 310,
        "y": 140,
        "wires": [
            [
                "858b8f2e5faacfe8"
            ]
        ]
    },
    {
        "id": "7401253026624c7c",
        "type": "function",
        "z": "89c1aad203a427f8",
        "name": "fnLockTable",
        "func": "\nmsg.topic = `lock table lugares_est write;`;\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 140,
        "wires": [
            [
                "0b0785a15c45f43b"
            ]
        ]
    },
    {
        "id": "dd33fab23e6824ed",
        "type": "function",
        "z": "914561935ad721a6",
        "name": "Query OP-Status",
        "func": "var estado= msg.payload;\n\nmsg.topic =` select htm.cla_mant, rea.cla_act , htm.num_serie, rea.descrip  ,\nhtm.descrip_mant,cae.nombre_empleado,  htm.fecha_hora_mant from hist_mant htm\n left join reg_activos rea on rea.num_serie = htm.num_serie left join cat_empleados cae on cae.cla_empleado= htm.responsable \n where htm.num_serie='${estado}' order by htm.fecha_hora_mant desc ; `;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 80,
        "wires": [
            [
                "2c6df2364836b42b"
            ]
        ]
    },
    {
        "id": "68897b431e23cb57",
        "type": "debug",
        "z": "914561935ad721a6",
        "name": "muestra",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "id_OP_resultado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 200,
        "wires": []
    },
    {
        "id": "2d3cb5a3db821f92",
        "type": "catch",
        "z": "914561935ad721a6",
        "name": "error",
        "scope": [
            "78697a6a11acd5aa"
        ],
        "uncaught": false,
        "x": 650,
        "y": 40,
        "wires": [
            [
                "f04173a45114591b"
            ]
        ]
    },
    {
        "id": "f04173a45114591b",
        "type": "ui_text",
        "z": "914561935ad721a6",
        "group": "dc623b65c0c2322d",
        "order": 2,
        "width": "6",
        "height": "2",
        "name": "Resultado Num Serie",
        "label": "Resultado Num Serie",
        "format": "{{msg.id_OP_resultado}}",
        "layout": "col-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "",
        "color": "#000000",
        "x": 700,
        "y": 80,
        "wires": []
    },
    {
        "id": "5d68a62c66cac52e",
        "type": "function",
        "z": "914561935ad721a6",
        "name": "Resultado_SearchOP",
        "func": "var descrip_mant;\ndescrip_mant = msg.payload[0].descrip;\n\n//global.set(\"descrip_mant\", descrip_mant)\n\nif (descrip_mant === undefined) {\n  msg.id_OP_resultado = \"No hay dato\";\n} else {\n  msg.id_OP_resultado = descrip_mant;\n}\n\n//msg.payload = typeof (msg.payload[0].descrip_mant);\n//msg.id_OP_resultado =\"Res \" + descrip_mant;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 120,
        "wires": [
            [
                "f04173a45114591b",
                "68897b431e23cb57",
                "5e3f2102d5b38798",
                "9945b3b6b6eceb25"
            ]
        ]
    },
    {
        "id": "5e3f2102d5b38798",
        "type": "debug",
        "z": "914561935ad721a6",
        "name": "alerta",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 160,
        "wires": []
    },
    {
        "id": "b48c2c1b2cd861e3",
        "type": "ui_text_input",
        "z": "914561935ad721a6",
        "name": "",
        "label": "Numero",
        "tooltip": "",
        "group": "dc623b65c0c2322d",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": true,
        "mode": "text",
        "delay": "300",
        "topic": "",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 80,
        "y": 80,
        "wires": [
            [
                "dd33fab23e6824ed"
            ]
        ]
    },
    {
        "id": "9945b3b6b6eceb25",
        "type": "ui_table",
        "z": "914561935ad721a6",
        "group": "dc623b65c0c2322d",
        "name": "Actividades Realizadas",
        "order": 3,
        "width": "6",
        "height": "5",
        "columns": [
            {
                "field": "descrip_mant",
                "title": "DESCRIPCION",
                "width": "300",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "nombre_empleado",
                "title": "CLAVE DEL ACTIVO",
                "width": "100",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "fecha_hora_mant",
                "title": "FECHA Y HORA",
                "width": "100",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 710,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "187709df9e74f2f9",
        "type": "comment",
        "z": "914561935ad721a6",
        "name": "Obtiene los datos de los activos en Mantenimiento",
        "info": "",
        "x": 210,
        "y": 40,
        "wires": []
    },
    {
        "id": "dc11a4c941822871",
        "type": "comment",
        "z": "914561935ad721a6",
        "name": "Se obtiene los valores de los activos.",
        "info": "",
        "x": 160,
        "y": 240,
        "wires": []
    },
    {
        "id": "5de8b0741dd0ac5b",
        "type": "ui_text_input",
        "z": "914561935ad721a6",
        "name": "",
        "label": "Ingrese la clave del Activo",
        "tooltip": "",
        "group": "5f375bf4a9c45793",
        "order": 1,
        "width": "0",
        "height": "0",
        "passthru": true,
        "mode": "text",
        "delay": "300",
        "topic": "",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 290,
        "y": 300,
        "wires": [
            [
                "18d492ba567f06a2"
            ]
        ]
    },
    {
        "id": "18d492ba567f06a2",
        "type": "function",
        "z": "914561935ad721a6",
        "name": "Query_Busqueda",
        "func": "var estatus = msg.payload;\nvar query = `SELECT ra.cla_act, ra.descrip AS descrip, cest.descrip as estatus,cest.cla_estatus, ra.num_serie, date_format(ra.fecha_adquisicion, '%Y-%m-%d') as fecha_adquisicion,\nif (ra.fecha_baja='1901-01-01', '- - -', date_format(ra.fecha_baja, '%Y-%m-%d')) as fecha_baja,\ncm.descrip as motivo_baja, ct.descrip AS tipo_activo, dp.descrip as Departamento, cu.descrip AS ubicaciones, dae.descrip as descEmpre, ce.nombre_empleado, dae.rfc\nFROM reg_activos ra\nLEFT JOIN datempre dae ON dae.cla_empre = ra.cla_terminal\nLEFT JOIN cat_tipact ct ON ra.tip_act = ct.cla_act\nLEFT JOIN cat_empleados ce ON ra.responsable = ce.cla_empleado\nLEFT JOIN cat_Estatus cest ON ra.estatus = cest.cla_estatus\nLEFT JOIN cat_motivobaja cm ON ra.motivo_baja = cm.cla_motivo\nLEFT JOIN cat_ubicaciones cu ON ra.ubicacion = cu.cla_ubic\nLEFT JOIN deptos dp ON ra.departamento = dp.cla_depto\nLEFT JOIN cat_proveedores cp ON ra.proveedor = cp.cla_prov\nWHERE ra.cla_terminal = 016 `;\n\nif (estatus !== 'todos') {\n    query += ` AND cest.descrip = '${estatus}'`;\n}\n\nmsg.topic = query.toString(); \n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 340,
        "wires": [
            [
                "bbeed43c9e78f3da"
            ]
        ]
    },
    {
        "id": "dd8ba10d9bc07247",
        "type": "ui_table",
        "z": "914561935ad721a6",
        "group": "5f375bf4a9c45793",
        "name": "",
        "order": 2,
        "width": "6",
        "height": "5",
        "columns": [
            {
                "field": "descrip",
                "title": "DESCRIPCION",
                "width": "300",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "num_serie",
                "title": "CLAVE DEL ACTIVO",
                "width": "100",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Departamento",
                "title": "FECHA Y HORA",
                "width": "100",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 750,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "f2e6aa47d1b8c69d",
        "type": "function",
        "z": "914561935ad721a6",
        "name": "fnBucaEstatusActivo",
        "func": "var claveEst;\nclaveEst = msg.payload[0].cla_estatus;\n\nmsg.topic = `  select reg.estatus,cae.cla_estatus, cae.descrip,  count(*) as Cantidad\n from reg_activos reg left join cat_estatus cae \n on reg.estatus= cae.cla_estatus WHERE cae.cla_estatus= '${claveEst}'  group by reg.estatus;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 380,
        "wires": [
            [
                "d730246692e485b0"
            ]
        ]
    },
    {
        "id": "cece546b10617fbc",
        "type": "ui_gauge",
        "z": "914561935ad721a6",
        "name": "",
        "group": "da7ce3b14c371164",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "gauge",
        "label": "units",
        "format": "{{msg.payload}}",
        "min": 0,
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 750,
        "y": 480,
        "wires": []
    },
    {
        "id": "5cca0433626d0a71",
        "type": "function",
        "z": "914561935ad721a6",
        "name": "fnCantidadEstatus",
        "func": "var cantidad;\ncantidad = msg.payload[0].Cantidad;\n\nif (cantidad === undefined) {\n  msg.payload = 500;\n} else {\n  msg.payload = cantidad;\n}\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 460,
        "wires": [
            [
                "cece546b10617fbc",
                "d8db096224b49228"
            ]
        ]
    },
    {
        "id": "d8db096224b49228",
        "type": "debug",
        "z": "914561935ad721a6",
        "name": "dato fin",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 440,
        "wires": []
    },
    {
        "id": "e8e3a3ad87d1ee2c",
        "type": "inject",
        "z": "914561935ad721a6",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "20",
        "crontab": "",
        "once": false,
        "onceDelay": "4",
        "topic": "",
        "payload": "baja",
        "payloadType": "str",
        "x": 90,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "1dda2582a4f3ffbd",
        "type": "inject",
        "z": "914561935ad721a6",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": false,
        "onceDelay": "10",
        "topic": "",
        "payload": "alta",
        "payloadType": "str",
        "x": 90,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "bbeed43c9e78f3da",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "914561935ad721a6",
        "name": "",
        "x": 510,
        "y": 340,
        "wires": [
            [
                "dd8ba10d9bc07247",
                "f2e6aa47d1b8c69d"
            ]
        ]
    },
    {
        "id": "d730246692e485b0",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "914561935ad721a6",
        "name": "",
        "x": 550,
        "y": 420,
        "wires": [
            [
                "5cca0433626d0a71"
            ]
        ]
    },
    {
        "id": "2c6df2364836b42b",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "914561935ad721a6",
        "name": "",
        "x": 250,
        "y": 120,
        "wires": [
            [
                "5d68a62c66cac52e"
            ]
        ]
    },
    {
        "id": "af56b57a2eda1521",
        "type": "debug",
        "z": "2925a6e260508c9e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 120,
        "wires": []
    },
    {
        "id": "b8928594f4b872f1",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "",
        "func": "\nmsg.payload= global.get(\"num1\") ;\n\nvar numero = global.get(\"num1\") ;\nvar total;\n\n total= numero + 10;\n \n msg.payload= total;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 120,
        "wires": [
            [
                "af56b57a2eda1521"
            ]
        ]
    },
    {
        "id": "7e4b86e20b070c33",
        "type": "inject",
        "z": "2925a6e260508c9e",
        "name": "inData",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 120,
        "wires": [
            [
                "b8928594f4b872f1"
            ]
        ]
    },
    {
        "id": "177401c69504b42b",
        "type": "switch",
        "z": "2925a6e260508c9e",
        "name": "",
        "property": "payload1",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "caso 1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "caso 2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "caso 3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "caso 4",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "caso 5",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 150,
        "y": 320,
        "wires": [
            [
                "fb8743265b71020f"
            ],
            [
                "7819202ba16fd92c"
            ],
            [
                "82d579c286c2b4ae"
            ],
            [
                "7e12cafe9ca7cfa9"
            ],
            [
                "7ad2987051a9f2b4"
            ]
        ]
    },
    {
        "id": "0634fde40860fed4",
        "type": "link in",
        "z": "2925a6e260508c9e",
        "name": "enlaceSwitchCase-In",
        "links": [
            "ad189bfd1df748e0"
        ],
        "x": 35,
        "y": 440,
        "wires": [
            [
                "980db0b9501f61ad"
            ]
        ]
    },
    {
        "id": "ec8d966e6b740ab7",
        "type": "debug",
        "z": "2925a6e260508c9e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload1",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 840,
        "y": 140,
        "wires": []
    },
    {
        "id": "ad189bfd1df748e0",
        "type": "link out",
        "z": "2925a6e260508c9e",
        "name": "enlaceSwitchCase-Out",
        "mode": "link",
        "links": [
            "0634fde40860fed4"
        ],
        "x": 905,
        "y": 220,
        "wires": []
    },
    {
        "id": "fb8743265b71020f",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "caso 1",
        "func": "if (msg.payload1==\"caso 1\"){\n    msg.payload1 = \"caso 2\"\n}else{\n    msg.payload1 = \"caso 5\"\n}\nmsg.payload= true;\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 220,
        "wires": [
            [
                "ec8d966e6b740ab7",
                "f40b844c3f45efdd",
                "676d72483d27da6f",
                "d4c56538bba46603"
            ]
        ]
    },
    {
        "id": "7819202ba16fd92c",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "caso 2",
        "func": "msg.payload1 = \"caso 3\"\nmsg.payload= false;\nmsg.payload= true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 260,
        "wires": [
            [
                "ad189bfd1df748e0",
                "ec8d966e6b740ab7",
                "f40b844c3f45efdd",
                "c7728f8a0ef90625"
            ]
        ]
    },
    {
        "id": "82d579c286c2b4ae",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "caso 3",
        "func": "msg.payload1 = \"caso 4\";\nmsg.payload= true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 300,
        "wires": [
            [
                "ec8d966e6b740ab7",
                "ad189bfd1df748e0",
                "f40b844c3f45efdd",
                "55af816d291dc93d"
            ]
        ]
    },
    {
        "id": "7e12cafe9ca7cfa9",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "caso 4",
        "func": "msg.payload1 = \"caso 5\";\nmsg.payload= true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 340,
        "wires": [
            [
                "ad189bfd1df748e0",
                "ec8d966e6b740ab7",
                "f40b844c3f45efdd",
                "b3fec59ab488f004"
            ]
        ]
    },
    {
        "id": "7ad2987051a9f2b4",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "caso 5",
        "func": "var apagarLed;\n\nflow.set(\"apagarLed\",false);\n\nmsg.payload1 = \"caso fin\";\nmsg.payload= true;\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 380,
        "wires": [
            [
                "ad189bfd1df748e0",
                "ec8d966e6b740ab7",
                "f40b844c3f45efdd",
                "7ce172b5d7f7f286",
                "60bec5815ab40b8f"
            ]
        ]
    },
    {
        "id": "148d13daa14fc064",
        "type": "inject",
        "z": "2925a6e260508c9e",
        "name": "inData",
        "props": [
            {
                "p": "payload1",
                "v": "caso 1",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 100,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "676d72483d27da6f",
        "type": "ui_led",
        "z": "2925a6e260508c9e",
        "order": 0,
        "group": "931188c4fcf02977",
        "width": 0,
        "height": 0,
        "label": "Caso 1",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": false,
        "name": "Caso 1",
        "x": 880,
        "y": 340,
        "wires": []
    },
    {
        "id": "c7728f8a0ef90625",
        "type": "ui_led",
        "z": "2925a6e260508c9e",
        "order": 0,
        "group": "931188c4fcf02977",
        "width": 0,
        "height": 0,
        "label": "Caso 2",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": false,
        "name": "Caso 2",
        "x": 880,
        "y": 380,
        "wires": []
    },
    {
        "id": "55af816d291dc93d",
        "type": "ui_led",
        "z": "2925a6e260508c9e",
        "order": 0,
        "group": "931188c4fcf02977",
        "width": 0,
        "height": 0,
        "label": "Caso 3",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": false,
        "name": "Caso 3",
        "x": 880,
        "y": 420,
        "wires": []
    },
    {
        "id": "b3fec59ab488f004",
        "type": "ui_led",
        "z": "2925a6e260508c9e",
        "order": 0,
        "group": "931188c4fcf02977",
        "width": 0,
        "height": 0,
        "label": "Caso 4",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": false,
        "name": "Caso 4",
        "x": 880,
        "y": 460,
        "wires": []
    },
    {
        "id": "7ce172b5d7f7f286",
        "type": "ui_led",
        "z": "2925a6e260508c9e",
        "order": 0,
        "group": "931188c4fcf02977",
        "width": 0,
        "height": 0,
        "label": "Caso 5",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": false,
        "name": "Caso 5",
        "x": 880,
        "y": 500,
        "wires": []
    },
    {
        "id": "980db0b9501f61ad",
        "type": "delay",
        "z": "2925a6e260508c9e",
        "name": "1",
        "pauseType": "queue",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 130,
        "y": 400,
        "wires": [
            [
                "177401c69504b42b"
            ]
        ]
    },
    {
        "id": "11f5e19e6f8406e1",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "caso 5",
        "func": "msg.payload=flow.get(\"apagarLed\");\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 540,
        "wires": [
            [
                "e1279620b404da9c",
                "676d72483d27da6f",
                "c7728f8a0ef90625",
                "55af816d291dc93d",
                "b3fec59ab488f004",
                "7ce172b5d7f7f286",
                "f40b844c3f45efdd"
            ]
        ]
    },
    {
        "id": "e1279620b404da9c",
        "type": "debug",
        "z": "2925a6e260508c9e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 540,
        "wires": []
    },
    {
        "id": "f40b844c3f45efdd",
        "type": "ui_text",
        "z": "2925a6e260508c9e",
        "group": "20612df8fb62aba8",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estado del Caso",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "className": "",
        "style": true,
        "font": "Gill Sans,Geneva,sans-serif",
        "fontSize": "26",
        "color": "#0670c1",
        "x": 900,
        "y": 280,
        "wires": []
    },
    {
        "id": "60bec5815ab40b8f",
        "type": "delay",
        "z": "2925a6e260508c9e",
        "name": "",
        "pauseType": "delay",
        "timeout": "7",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 460,
        "wires": [
            [
                "11f5e19e6f8406e1"
            ]
        ]
    },
    {
        "id": "d4c56538bba46603",
        "type": "delay",
        "z": "2925a6e260508c9e",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 220,
        "wires": [
            [
                "ad189bfd1df748e0"
            ]
        ]
    },
    {
        "id": "a717d88bab5dd809",
        "type": "ui_button",
        "z": "2925a6e260508c9e",
        "name": "",
        "group": "20612df8fb62aba8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Activa Lectura",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 120,
        "y": 220,
        "wires": [
            [
                "863d121a59895f73"
            ]
        ]
    },
    {
        "id": "863d121a59895f73",
        "type": "function",
        "z": "2925a6e260508c9e",
        "name": "function 1",
        "func": "if(msg.payload=== true ){\nmsg.payload1=\"caso 1\"\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 120,
        "y": 260,
        "wires": [
            [
                "177401c69504b42b",
                "ec8d966e6b740ab7"
            ]
        ]
    },
    {
        "id": "769854af6c4a098e",
        "type": "inject",
        "z": "6a8ca940c6daf368",
        "name": "simple",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"Name\":\"<b>Yokoi</b>\",\"Age\":\"30\",\"Color\":\"lime\",\"Prog\":70,\"Star\":\"3\"},{\"Name\":\"<i>DCJ</i>\",\"Age\":\"50\",\"Color\":\"dodgerblue\",\"Prog\":\"45\",\"Star\":2,\"Pass\":false,\"web\":\"\"},{\"Name\":\"Nick\",\"Age\":\"40\",\"Color\":\"darkred\",\"Prog\":95,\"Star\":\"5\",\"Pass\":true,\"web\":\"http://nodered.org\"},{\"Name\":\"Oli\"}]",
        "payloadType": "json",
        "x": 230,
        "y": 140,
        "wires": [
            [
                "e260ec7f2add32a1"
            ]
        ]
    },
    {
        "id": "36d57c7234e43b06",
        "type": "inject",
        "z": "6a8ca940c6daf368",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "56565652",
        "payload": "[{\"Name\":\"<b>Yokoi</b>\",\"Age\":\"30\",\"Color\":\"lime\",\"Prog\":20,\"Star\":\"1\"},{\"Name\":\"<i>DCJ</i>\",\"Age\":\"50\",\"Color\":\"dodgerblue\",\"Prog\":\"80\",\"Star\":4,\"Pass\":true,\"web\":\"\"},{\"Name\":\"Nick\",\"Age\":\"40\",\"Color\":\"red\",\"Prog\":90,\"Star\":\"5\",\"Pass\":true,\"web\":\"http://nodered.org\"},{\"Name\":\"Oli\"}]",
        "payloadType": "json",
        "x": 230,
        "y": 180,
        "wires": [
            [
                "4eb40ac08531e9a1"
            ]
        ]
    },
    {
        "id": "4eb40ac08531e9a1",
        "type": "ui_table",
        "z": "6a8ca940c6daf368",
        "group": "571a38b1.5e3638",
        "name": "richer table",
        "order": 1,
        "width": "0",
        "height": "0",
        "columns": [
            {
                "field": "Name",
                "title": "Who",
                "width": "",
                "align": "left",
                "formatter": "html",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Age",
                "title": "Age",
                "width": "40",
                "align": "center",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Color",
                "title": "",
                "width": "5%",
                "align": "left",
                "formatter": "color",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Star",
                "title": "%",
                "width": "100",
                "align": "left",
                "formatter": "star",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Pass",
                "title": "",
                "width": "5%",
                "align": "center",
                "formatter": "tickCross",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Prog",
                "title": "",
                "width": "80",
                "align": "left",
                "formatter": "progress",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "web",
                "title": "URL",
                "width": "",
                "align": "left",
                "formatter": "link",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 450,
        "y": 180,
        "wires": []
    },
    {
        "id": "e260ec7f2add32a1",
        "type": "ui_table",
        "z": "6a8ca940c6daf368",
        "group": "9ed850cc3dc8e082",
        "name": "simple",
        "order": 10,
        "width": "0",
        "height": "0",
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 430,
        "y": 140,
        "wires": []
    },
    {
        "id": "75586266.74e59c",
        "type": "file",
        "z": "af2dccf9.e88c5",
        "name": "creaArchivo",
        "filename": "c:/imprimeWS/imprime.prn",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 350,
        "y": 220,
        "wires": [
            [
                "223a9a0f.9f58e6"
            ]
        ]
    },
    {
        "id": "50022315.9fbf2c",
        "type": "function",
        "z": "af2dccf9.e88c5",
        "name": "fnEPL",
        "func": " var strCodBar = msg.req.params.etiqueta;\n //flow.get('strCadena'); //msg.payload;\n var z = String(strCodBar);\n\nif (z.length === 7) {\n    msg.payload = \"CT~~CD,~CC^~CT~\\r\\n\"\n    msg.payload += \"^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ\\r\\n\"\n    msg.payload += \"^XA\\r\\n\"\n    msg.payload += \"^MMT\\r\\n\"\n    msg.payload += \"^PW480\\r\\n\"\n    msg.payload += \"^LL0120\\r\\n\"\n    msg.payload += \"^LS0\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT475,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT219,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^PQ1,0,1,Y^XZ\\r\\n\"\n\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 160,
        "wires": [
            [
                "75586266.74e59c"
            ]
        ]
    },
    {
        "id": "223a9a0f.9f58e6",
        "type": "exec",
        "z": "af2dccf9.e88c5",
        "command": "copy /B c:\\imprimeWS\\imprime.prn \\\\192.168.0.38\\hp1",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "execImprime.bat",
        "x": 360,
        "y": 280,
        "wires": [
            [
                "59061405.5b7cfc"
            ],
            [
                "59061405.5b7cfc"
            ],
            [
                "59061405.5b7cfc"
            ]
        ]
    },
    {
        "id": "a80c5f14.192bd",
        "type": "http in",
        "z": "af2dccf9.e88c5",
        "name": "",
        "url": "/wsImprime/:etiqueta",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 120,
        "wires": [
            [
                "50022315.9fbf2c"
            ]
        ]
    },
    {
        "id": "59061405.5b7cfc",
        "type": "http response",
        "z": "af2dccf9.e88c5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 550,
        "y": 280,
        "wires": []
    },
    {
        "id": "b5199fce27e7cb19",
        "type": "inject",
        "z": "321a82c8d15c0c43",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "ee1b7c2163938707",
        "type": "ui_text",
        "z": "321a82c8d15c0c43",
        "group": "74a72f06f78e90a3",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tipo de Boleto",
        "format": "{{msg.str_resultado}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 600,
        "y": 220,
        "wires": []
    },
    {
        "id": "bb3e4131ccd75e88",
        "type": "ui_led",
        "z": "321a82c8d15c0c43",
        "order": 5,
        "group": "74a72f06f78e90a3",
        "width": 0,
        "height": 0,
        "label": "Color de Acceso",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "square",
        "showGlow": true,
        "name": "Notificación de Acceso",
        "x": 620,
        "y": 260,
        "wires": []
    },
    {
        "id": "03219158a130a82f",
        "type": "ui_text_input",
        "z": "321a82c8d15c0c43",
        "name": "",
        "label": "Ingresar Num Folio :",
        "tooltip": "",
        "group": "f5521a450a3381b3",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "number",
        "delay": "10",
        "topic": "payload",
        "sendOnBlur": false,
        "className": "",
        "topicType": "msg",
        "x": 160,
        "y": 160,
        "wires": [
            [
                "a05bf84988b8b8e3"
            ]
        ]
    },
    {
        "id": "a05bf84988b8b8e3",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "fnBuscaFolios",
        "func": "var numFolio;\nnumFolio= msg.payload;\nmsg.topic = `select * from folios_est \nwhere folio='${numFolio}'   order by folio desc ;`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 140,
        "y": 220,
        "wires": [
            [
                "f5698035dcbf2588"
            ]
        ]
    },
    {
        "id": "a87f4d20564c2666",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "fnValidaFolios",
        "func": "var blnValor;\nblnValor= msg.payload;\nmsg.valor= blnValor;\n\nmsg.este = global.get(\"gblPlaca\");\n\nif (blnValor !==true  ){\n    msg.str_resultado = \"No Existe\";\n        msg.payload = false;\n        msg.acceso = \"Sin acceso\"\n}else{\n    \n    if (global.get(\"gblTipo\") !== undefined) {\n        msg.str_resultado = global.get(\"gblTipo\");\n        msg.fecha = global.get(\"gblFecha\");\n        msg.payload = true;\n        msg.acceso = \"Entrar\"\n    } else {\n        msg.str_resultado = \"No Existe\";\n        msg.fecha= \"Sin datos\";\n        msg.payload = false;\n        msg.acceso = \"No entrar\";\n    }\n\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 380,
        "wires": [
            [
                "ee1b7c2163938707",
                "bb3e4131ccd75e88",
                "4b4ae56fa0151561",
                "a22e398e3ce02e85",
                "4ff9283b234da382",
                "bb2b2f5cc6ec6b4d",
                "949c984b852b071b",
                "e885afb7b75235ac"
            ]
        ]
    },
    {
        "id": "4ff9283b234da382",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "RESULTADO VALIDAFOLIOS",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 420,
        "wires": []
    },
    {
        "id": "f5698035dcbf2588",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "321a82c8d15c0c43",
        "name": "",
        "x": 130,
        "y": 260,
        "wires": [
            [
                "4c20a1e33b4f0f7e",
                "beb7048322f68252"
            ]
        ]
    },
    {
        "id": "4b4ae56fa0151561",
        "type": "ui_switch",
        "z": "321a82c8d15c0c43",
        "name": "",
        "label": "Abre Puerta",
        "tooltip": "",
        "group": "74a72f06f78e90a3",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "green",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "red",
        "animate": false,
        "className": "",
        "x": 590,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "a22e398e3ce02e85",
        "type": "ui_text",
        "z": "321a82c8d15c0c43",
        "group": "74a72f06f78e90a3",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estatus de Acceso",
        "format": "{{msg.acceso}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 610,
        "y": 340,
        "wires": []
    },
    {
        "id": "4eea5d6db2be8ecd",
        "type": "ui_text",
        "z": "321a82c8d15c0c43",
        "group": "74a72f06f78e90a3",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Fecha de ingreso",
        "format": "{{msg.fecha}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 750,
        "y": 380,
        "wires": []
    },
    {
        "id": "bb2b2f5cc6ec6b4d",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "RESULTADO ACCESO",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "acceso",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 460,
        "wires": []
    },
    {
        "id": "5855c22dc0442871",
        "type": "ui_button",
        "z": "321a82c8d15c0c43",
        "name": "",
        "group": "f5521a450a3381b3",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Buscar",
        "tooltip": "",
        "color": "white",
        "bgcolor": "green",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 120,
        "y": 340,
        "wires": [
            [
                "a87f4d20564c2666",
                "b23f14771ef9dff2",
                "ec61f016f00a2c5a"
            ]
        ]
    },
    {
        "id": "4c20a1e33b4f0f7e",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 60,
        "wires": []
    },
    {
        "id": "beb7048322f68252",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "fnDeclaraVarGlobales",
        "func": "var tipo = msg.payload && msg.payload[0] && msg.payload[0].tipo_folio;\nvar fecha = msg.payload && msg.payload[0] && msg.payload[0].fecha_inicio;\nvar placa = msg.payload && msg.payload[0] && msg.payload[0].num_placa;\nvar dias_est1 = msg.payload && msg.payload[0] && msg.payload[0].dias_est;\nvar folio = msg.payload && msg.payload[0] && msg.payload[0].folio;\nvar datos = msg.payload ;\n\nglobal.set(\"gblTipo\",tipo);\nglobal.set(\"gblFecha\",fecha);\nglobal.set(\"gblPlaca\",placa);\nglobal.set(\"gblDias\",dias_est1);\nglobal.set(\"gblFolio\",folio);\n\nglobal.set(\"datos\",datos);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 300,
        "wires": [
            [
                "5855c22dc0442871"
            ]
        ]
    },
    {
        "id": "876f151ef89c5abf",
        "type": "ui_table",
        "z": "321a82c8d15c0c43",
        "group": "74a72f06f78e90a3",
        "name": "Tabla información",
        "order": 8,
        "width": 0,
        "height": 0,
        "columns": [
            {
                "field": "num_placa",
                "title": "Número de Placa",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 610,
        "y": 140,
        "wires": []
    },
    {
        "id": "b23f14771ef9dff2",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "function 2",
        "func": "msg.payload= global.get(\"datos\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 340,
        "wires": [
            [
                "876f151ef89c5abf",
                "c3a5864f7bdc61b5"
            ]
        ]
    },
    {
        "id": "c3a5864f7bdc61b5",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 100,
        "wires": []
    },
    {
        "id": "949c984b852b071b",
        "type": "moment",
        "z": "321a82c8d15c0c43",
        "name": "formato",
        "topic": "",
        "input": "fecha",
        "inputType": "msg",
        "inTz": "America/Mexico_City",
        "adjAmount": 0,
        "adjType": "minutes",
        "adjDir": "add",
        "format": "LLL",
        "locale": "es_ES",
        "output": "fecha",
        "outputType": "msg",
        "outTz": "America/Mexico_City",
        "x": 580,
        "y": 380,
        "wires": [
            [
                "4eea5d6db2be8ecd"
            ]
        ]
    },
    {
        "id": "6908d618d55e5674",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "fnBuscaTotalVenta",
        "func": "let fecha = msg.formatDate;\nvar usuario = \"USUARIO\";\n msg.usuario= usuario;\nmsg.muestra= fecha;\n    msg.topic = `SELECT tipo_folio, sum(totalf) as cantidadFolio, usuario, SUM(Costo_Total) AS Suma_Costo_Total \n    FROM ( SELECT usuario, tipo_folio, count(tipo_folio) as totalf, SUM(costo + costo_2) as Costo_Total \n    FROM hist_est_folio  WHERE fechacobro_2 = '${fecha}' AND usuario_2 = '${usuario}'  AND turno=2 GROUP BY tipo_folio, usuario     \n    UNION ALL \n    SELECT usuario, tipo_folio, count(tipo_folio) as totalf, SUM(costo + costo_2) as Costo_Total  \n    FROM hist_est_folio WHERE fechacobro = '${fecha}' AND usuario = '${usuario}'  AND turno=2 \n    GROUP BY tipo_folio, usuario ) AS subquery GROUP BY tipo_folio, usuario ORDER BY usuario, tipo_folio;`;\n\n    return msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 940,
        "wires": [
            [
                "7b9cf3adbacd1b3b",
                "a215ade63b22c6ab",
                "cc49875c370aa265"
            ]
        ]
    },
    {
        "id": "a215ade63b22c6ab",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "321a82c8d15c0c43",
        "name": "",
        "x": 250,
        "y": 980,
        "wires": [
            [
                "7b9cf3adbacd1b3b",
                "84dd93c35970bed3",
                "fd967f3627b11f32"
            ]
        ]
    },
    {
        "id": "84dd93c35970bed3",
        "type": "ui_table",
        "z": "321a82c8d15c0c43",
        "group": "57ae5db0698d768f",
        "name": "",
        "order": 3,
        "width": 0,
        "height": 0,
        "columns": [
            {
                "field": "tipo_folio",
                "title": "Tipo de Folio",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "cantidadFolio",
                "title": "Cantidad de Folio",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "Suma_Costo_Total",
                "title": "Costo Total",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 710,
        "y": 1040,
        "wires": []
    },
    {
        "id": "d06446e95499c724",
        "type": "ui_date_picker",
        "z": "321a82c8d15c0c43",
        "name": "",
        "label": "date",
        "group": "57ae5db0698d768f",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "topicType": "str",
        "className": "",
        "x": 230,
        "y": 860,
        "wires": [
            [
                "3e6133e83c6e7c3c"
            ]
        ]
    },
    {
        "id": "7b9cf3adbacd1b3b",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "muestra",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 940,
        "wires": []
    },
    {
        "id": "3e6133e83c6e7c3c",
        "type": "moment",
        "z": "321a82c8d15c0c43",
        "name": "",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "America/Mexico_City",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "YYYY-MM-DD",
        "locale": "es_ES",
        "output": "formatDate",
        "outputType": "msg",
        "outTz": "America/Mexico_City",
        "x": 280,
        "y": 900,
        "wires": [
            [
                "6908d618d55e5674",
                "7b9cf3adbacd1b3b",
                "cd3e6c52a577a805"
            ]
        ]
    },
    {
        "id": "cd3e6c52a577a805",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "formatDate",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 900,
        "wires": []
    },
    {
        "id": "fd967f3627b11f32",
        "type": "ui_text",
        "z": "321a82c8d15c0c43",
        "group": "57ae5db0698d768f",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Usuario",
        "format": "{{msg.payload[0].usuario}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 720,
        "y": 980,
        "wires": []
    },
    {
        "id": "57a9b6dd99fb5449",
        "type": "ui_text_input",
        "z": "321a82c8d15c0c43",
        "name": "",
        "label": "Usuario Responsable :",
        "tooltip": "",
        "group": "57ae5db0698d768f",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "payload",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 280,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "cc49875c370aa265",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "debug usuario",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "usuario",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 740,
        "y": 860,
        "wires": []
    },
    {
        "id": "a0e1f716314974ad",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "function 3",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "09f3d3efdd0dc322",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "function 4",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "e885afb7b75235ac",
        "type": "ui_toast",
        "z": "321a82c8d15c0c43",
        "position": "bottom right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 610,
        "y": 500,
        "wires": []
    },
    {
        "id": "ec61f016f00a2c5a",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "fnValidaFecha-Precio",
        "func": "var fechaInicio = Date.now();\nvar fechaFin = global.get(\"gblFecha\");\nvar validaTipo = global.get(\"gblTipo\")\nvar diasEst1 = global.get(\"gblDias\")\nvar folioF = global.get(\"gblFolio\")\n\nvar diffEnMinutos = Math.floor((fechaInicio - fechaFin) / (1000 * 60));\n\nvar horasRedondeadas = Math.max(Math.round(diffEnMinutos / 60), 1);\nvar diasRedondeados = Math.max(Math.round(horasRedondeadas / 24), 1);\n\nif (validaTipo== \"Normal\") {\n    var intPagar = horasRedondeadas * 10;\n    msg.pago = '$ ' + intPagar + '.00 MXN'; \n    msg.tiempo = horasRedondeadas + ' Hr';  \n    msg.folio= folioF; \n} \nelse {\n    var intPagar = diasEst1 * 100;\n    msg.pago = '$ ' + intPagar + '.00 MXN';\n    msg.tiempo = diasEst1 + ' D';\n    msg.folio = folioF;\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 420,
        "wires": [
            [
                "0b390fcd320ab098",
                "cf77ca20074d9520",
                "276eaf9466ee5ec7"
            ]
        ]
    },
    {
        "id": "0b390fcd320ab098",
        "type": "ui_text",
        "z": "321a82c8d15c0c43",
        "group": "74a72f06f78e90a3",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Total a Pagar",
        "format": "{{msg.pago}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 590,
        "y": 540,
        "wires": []
    },
    {
        "id": "cf77ca20074d9520",
        "type": "ui_text",
        "z": "321a82c8d15c0c43",
        "group": "74a72f06f78e90a3",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tiempo Estacionado",
        "format": "{{msg.tiempo}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 620,
        "y": 580,
        "wires": []
    },
    {
        "id": "4ef44fea31ca8615",
        "type": "debug",
        "z": "321a82c8d15c0c43",
        "name": "tiempo",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 620,
        "wires": []
    },
    {
        "id": "276eaf9466ee5ec7",
        "type": "function",
        "z": "321a82c8d15c0c43",
        "name": "fnEPL",
        "func": " var strCodBar = msg.folio;\n //flow.get('strCadena'); //msg.payload;\n var z = String(strCodBar);\n\nif (z.length > 1) {\n    msg.payload = \"CT~~CD,~CC^~CT~\\r\\n\"\n    msg.payload += \"^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ\\r\\n\"\n    msg.payload += \"^XA\\r\\n\"\n    msg.payload += \"^MMT\\r\\n\"\n    msg.payload += \"^PW480\\r\\n\"\n    msg.payload += \"^LL0120\\r\\n\"\n    msg.payload += \"^LS0\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT475,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT219,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^PQ1,0,1,Y^XZ\\r\\n\"\n\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 500,
        "wires": [
            [
                "26dec6a2ee18754b"
            ]
        ]
    },
    {
        "id": "26dec6a2ee18754b",
        "type": "file",
        "z": "321a82c8d15c0c43",
        "name": "creaArchivo",
        "filename": "c:/imprimeWS/imprime.prn",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 350,
        "y": 560,
        "wires": [
            [
                "448ac9537b50a34d"
            ]
        ]
    },
    {
        "id": "448ac9537b50a34d",
        "type": "exec",
        "z": "321a82c8d15c0c43",
        "command": "copy /B c:\\imprimeWS\\word.prn \\\\192.168.0.38\\hp1",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "execImprime.bat",
        "x": 360,
        "y": 620,
        "wires": [
            [
                "4ef44fea31ca8615"
            ],
            [
                "4ef44fea31ca8615"
            ],
            [
                "4ef44fea31ca8615"
            ]
        ]
    },
    {
        "id": "d4fdd47b1cd07d69",
        "type": "ui_button",
        "z": "281fcb369639668d",
        "name": "",
        "group": "e9dac18c3e8fef5a",
        "order": 1,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Entrada 1",
        "tooltip": "",
        "color": "white",
        "bgcolor": "green",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 100,
        "y": 160,
        "wires": [
            [
                "057dad228c13731a"
            ]
        ]
    },
    {
        "id": "925923a07dbba083",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnInsertarFolio",
        "func": "const now = new Date();\n\n// Formatear la fecha y hora en el formato de MySQL\nconst formattedDate = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\n\n\nmsg.topic = `INSERT INTO folios_est (fecha_ingreso,fecha_fin,dias_est,costo,tipo_folio) \n VALUES ('${formattedDate}','1901-01-01 23:59:59',0,0,'NORMAL');`;\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 220,
        "wires": [
            [
                "85e5183e6ac88253"
            ]
        ]
    },
    {
        "id": "85e5183e6ac88253",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 790,
        "y": 220,
        "wires": [
            [
                "bc5fe8d98917d944"
            ]
        ]
    },
    {
        "id": "f2ee0ff958c731dc",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 450,
        "y": 220,
        "wires": [
            [
                "925923a07dbba083"
            ]
        ]
    },
    {
        "id": "e4990b66fbaba252",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnLockTable",
        "func": "if (msg.payload===true){\nmsg.topic = `lock table folios_est write;`;\nreturn msg;\n}\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 220,
        "wires": [
            [
                "f2ee0ff958c731dc"
            ]
        ]
    },
    {
        "id": "7440f9cdc70f3172",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 280,
        "wires": [
            [
                "953b01f79944ac7a"
            ]
        ]
    },
    {
        "id": "953b01f79944ac7a",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 590,
        "y": 280,
        "wires": [
            [
                "4ee0578766d4de58",
                "20ec4126a9b8aaf7"
            ]
        ]
    },
    {
        "id": "4ee0578766d4de58",
        "type": "debug",
        "z": "281fcb369639668d",
        "name": "INSERTA NUM2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "imprimeFolio1",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 320,
        "wires": []
    },
    {
        "id": "56f27785929b0483",
        "type": "inject",
        "z": "281fcb369639668d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "18",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "43e8d042d6934d19",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnDeclaraVarGlobales",
        "func": "var numFolio = msg.payload && msg.payload[0] && msg.payload[0].folio;\n\nglobal.set(\"gblnumFolio\",numFolio);\n\nmsg.topic = 'Entrada 1: Se creo el folio ' + global.get(\"gblnumFolio\")\nmsg.folio =  global.get(\"gblnumFolio\")\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 280,
        "wires": [
            [
                "7440f9cdc70f3172",
                "01c7e4a104609e43"
            ]
        ]
    },
    {
        "id": "bc5fe8d98917d944",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnBuscarFolio",
        "func": "msg.topic = `select * from folios_est order by folio desc limit 1;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 220,
        "wires": [
            [
                "4c0d41d424520759"
            ]
        ]
    },
    {
        "id": "4c0d41d424520759",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 1130,
        "y": 220,
        "wires": [
            [
                "43e8d042d6934d19"
            ]
        ]
    },
    {
        "id": "c989af9e8f544a7c",
        "type": "ui_button",
        "z": "281fcb369639668d",
        "name": "",
        "group": "e9dac18c3e8fef5a",
        "order": 2,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Entrada 2",
        "tooltip": "",
        "color": "white",
        "bgcolor": "green",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 80,
        "y": 700,
        "wires": [
            [
                "f9f09c907b4642d5"
            ]
        ]
    },
    {
        "id": "00f968db9b71fa7f",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 750,
        "y": 700,
        "wires": [
            [
                "bf3266e6a33595f7"
            ]
        ]
    },
    {
        "id": "f61ad2e183818028",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 410,
        "y": 700,
        "wires": [
            [
                "03f50abb6813a087"
            ]
        ]
    },
    {
        "id": "67cee5fae5c4eac5",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnLockTable",
        "func": "if(msg.payload===true){\n    msg.topic = `lock table folios_est write;`;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 660,
        "wires": [
            [
                "f61ad2e183818028"
            ]
        ]
    },
    {
        "id": "e5d81b659aeb8862",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 760,
        "wires": [
            [
                "08e64561a62c6f32"
            ]
        ]
    },
    {
        "id": "08e64561a62c6f32",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 570,
        "y": 760,
        "wires": [
            [
                "a585ca71578463c8",
                "9c61b9115843c983"
            ]
        ]
    },
    {
        "id": "a585ca71578463c8",
        "type": "debug",
        "z": "281fcb369639668d",
        "name": "INSERTA NUM3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "imprimeFolio2",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 800,
        "wires": []
    },
    {
        "id": "09ea53dc693e6943",
        "type": "inject",
        "z": "281fcb369639668d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "57",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "09962f7307487944",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnDeclaraVarGlobales",
        "func": "var numFolio = msg.payload && msg.payload[0] && msg.payload[0].folio;\n\nglobal.set(\"gblnumFolio\",numFolio);\n\nmsg.topic = 'Entrada 2: Se creo el folio ' + global.get(\"gblnumFolio\")\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 760,
        "wires": [
            [
                "e5d81b659aeb8862",
                "0e4dc08db2f5d6e8"
            ]
        ]
    },
    {
        "id": "7fdce5739768f064",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "281fcb369639668d",
        "name": "",
        "x": 1090,
        "y": 700,
        "wires": [
            [
                "09962f7307487944"
            ]
        ]
    },
    {
        "id": "01c7e4a104609e43",
        "type": "ui_toast",
        "z": "281fcb369639668d",
        "position": "top left",
        "displayTime": "3",
        "highlight": "yellow",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 400,
        "y": 320,
        "wires": []
    },
    {
        "id": "0e4dc08db2f5d6e8",
        "type": "ui_toast",
        "z": "281fcb369639668d",
        "position": "top right",
        "displayTime": "3",
        "highlight": "Red",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 380,
        "y": 800,
        "wires": []
    },
    {
        "id": "bf3266e6a33595f7",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnBuscarFolio",
        "func": "msg.topic = `select * from folios_est order by folio desc limit 1;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 700,
        "wires": [
            [
                "7fdce5739768f064"
            ]
        ]
    },
    {
        "id": "03f50abb6813a087",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnInsertarFolio",
        "func": "const now = new Date();\n\n// Formatear la fecha y hora en el formato de MySQL\nconst formattedDate = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\n\n\nmsg.topic = `INSERT INTO folios_est (fecha_ingreso,fecha_fin,dias_est,costo,tipo_folio) \n VALUES ('${formattedDate}','1901-01-01 23:59:59',0,0,'NORMAL');`;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 700,
        "wires": [
            [
                "00f968db9b71fa7f"
            ]
        ]
    },
    {
        "id": "20ec4126a9b8aaf7",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnEPL",
        "func": " var strCodBar = msg.folio;\n //flow.get('strCadena'); //msg.payload;\n var z = String(strCodBar);\n\nif (z.length > 1) {\n    msg.payload = \"CT~~CD,~CC^~CT~\\r\\n\"\n    msg.payload += \"^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ\\r\\n\"\n    msg.payload += \"^XA\\r\\n\"\n    msg.payload += \"^MMT\\r\\n\"\n    msg.payload += \"^PW480\\r\\n\"\n    msg.payload += \"^LL0120\\r\\n\"\n    msg.payload += \"^LS0\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT475,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT219,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^PQ1,0,1,Y^XZ\\r\\n\"\n\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 280,
        "wires": [
            [
                "7f1512411e72fa81",
                "757b0f82022f9c3d"
            ]
        ]
    },
    {
        "id": "7f1512411e72fa81",
        "type": "file",
        "z": "281fcb369639668d",
        "name": "creaArchivo",
        "filename": "c:/imprimeWS/imprime.prn",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 890,
        "y": 280,
        "wires": [
            [
                "9ea54ee571a189f3"
            ]
        ]
    },
    {
        "id": "9ea54ee571a189f3",
        "type": "exec",
        "z": "281fcb369639668d",
        "command": "copy /B c:\\imprimeWS\\imprime.prn \\\\192.168.0.38\\hp1",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "execImprime.bat",
        "x": 1080,
        "y": 280,
        "wires": [
            [
                "700b3e03cbac8ad4"
            ],
            [
                "700b3e03cbac8ad4"
            ],
            [
                "700b3e03cbac8ad4"
            ]
        ]
    },
    {
        "id": "700b3e03cbac8ad4",
        "type": "debug",
        "z": "281fcb369639668d",
        "name": "tiempo",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 340,
        "wires": []
    },
    {
        "id": "20cc5d094683d72e",
        "type": "comment",
        "z": "281fcb369639668d",
        "name": "Flujo de la entrada 1",
        "info": "",
        "x": 110,
        "y": 60,
        "wires": []
    },
    {
        "id": "7ab01ebead3fd28a",
        "type": "comment",
        "z": "281fcb369639668d",
        "name": "Flujo de la entrada 2",
        "info": "",
        "x": 130,
        "y": 600,
        "wires": []
    },
    {
        "id": "9c61b9115843c983",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "fnEPL",
        "func": " var strCodBar = msg.folio;\n //flow.get('strCadena'); //msg.payload;\n var z = String(strCodBar);\n\nif (z.length > 1) {\n    msg.payload = \"CT~~CD,~CC^~CT~\\r\\n\"\n    msg.payload += \"^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ\\r\\n\"\n    msg.payload += \"^XA\\r\\n\"\n    msg.payload += \"^MMT\\r\\n\"\n    msg.payload += \"^PW480\\r\\n\"\n    msg.payload += \"^LL0120\\r\\n\"\n    msg.payload += \"^LS0\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT475,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT219,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^PQ1,0,1,Y^XZ\\r\\n\"\n\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 760,
        "wires": [
            [
                "223008cd23383315",
                "3ebc0ff48340720d"
            ]
        ]
    },
    {
        "id": "223008cd23383315",
        "type": "file",
        "z": "281fcb369639668d",
        "name": "creaArchivo",
        "filename": "c:/imprimeWS/imprime.prn",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 890,
        "y": 760,
        "wires": [
            [
                "a242e4fa22912b63"
            ]
        ]
    },
    {
        "id": "a242e4fa22912b63",
        "type": "exec",
        "z": "281fcb369639668d",
        "command": "copy /B c:\\imprimeWS\\imprime.prn \\\\192.168.0.38\\hp1",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "execImprime.bat",
        "x": 1080,
        "y": 760,
        "wires": [
            [
                "86a75b93c88be12b"
            ],
            [
                "86a75b93c88be12b"
            ],
            [
                "86a75b93c88be12b"
            ]
        ]
    },
    {
        "id": "86a75b93c88be12b",
        "type": "debug",
        "z": "281fcb369639668d",
        "name": "tiempo",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 820,
        "wires": []
    },
    {
        "id": "057dad228c13731a",
        "type": "subflow:f03057dae7955163",
        "z": "281fcb369639668d",
        "name": "",
        "x": 300,
        "y": 160,
        "wires": [
            [
                "e4990b66fbaba252"
            ]
        ]
    },
    {
        "id": "4d4395d6ca895454",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "function 42",
        "func": "var srcNumEst = global.get(\"gblNumEst\");\n\nif (srcNumEst !== undefined) {\n    msg.verdadero = true;\n} else {\n    msg.verdadero = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 80,
        "wires": [
            [
                "e7e901f02d96e063"
            ]
        ]
    },
    {
        "id": "e7e901f02d96e063",
        "type": "switch",
        "z": "281fcb369639668d",
        "name": "",
        "property": "verdadero",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 60,
        "wires": [
            [
                "c6068746dbf836a0"
            ],
            [
                "b88e155c57fb37b6"
            ]
        ]
    },
    {
        "id": "b88e155c57fb37b6",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "function 43",
        "func": "if(msg.verdadero == false){\n    msg.topic = 'Notificación Estacionamiento';\n    msg.payload = 'No hay Lugar Disponible en el Estacionamiento, Volver mas Tarde';\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 80,
        "wires": [
            [
                "8946248b58f60ea1"
            ]
        ]
    },
    {
        "id": "c6068746dbf836a0",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "function 44",
        "func": "if (msg.verdadero = true){\n    msg.payload = true;\n    msg.respuesta = global.get(\"gblNumEst\")\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 40,
        "wires": [
            [
                "fb1d2edc5caf33bd"
            ]
        ]
    },
    {
        "id": "fb1d2edc5caf33bd",
        "type": "debug",
        "z": "281fcb369639668d",
        "name": "debug respuesta",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "respuesta",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1230,
        "y": 60,
        "wires": []
    },
    {
        "id": "8946248b58f60ea1",
        "type": "ui_toast",
        "z": "281fcb369639668d",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1230,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "757b0f82022f9c3d",
        "type": "subflow:89c1aad203a427f8",
        "z": "281fcb369639668d",
        "name": "",
        "x": 830,
        "y": 380,
        "wires": [
            [
                "2440145eda1c751e"
            ]
        ]
    },
    {
        "id": "b88c7197e0ef36f7",
        "type": "ui_audio",
        "z": "281fcb369639668d",
        "name": "",
        "group": "e9dac18c3e8fef5a",
        "voice": "urn:moz-tts:sapi:Microsoft Zira Desktop - English (United States)?en-US",
        "always": "",
        "x": 1240,
        "y": 360,
        "wires": []
    },
    {
        "id": "2440145eda1c751e",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "function 45",
        "func": "msg.payload = `Bienvenido!`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 380,
        "wires": [
            [
                "b88c7197e0ef36f7"
            ]
        ]
    },
    {
        "id": "f9f09c907b4642d5",
        "type": "subflow:f03057dae7955163",
        "z": "281fcb369639668d",
        "name": "",
        "x": 420,
        "y": 600,
        "wires": [
            [
                "67cee5fae5c4eac5"
            ]
        ]
    },
    {
        "id": "3ebc0ff48340720d",
        "type": "subflow:89c1aad203a427f8",
        "z": "281fcb369639668d",
        "name": "",
        "x": 850,
        "y": 940,
        "wires": [
            [
                "3d08cd6e8445f078"
            ]
        ]
    },
    {
        "id": "3d08cd6e8445f078",
        "type": "function",
        "z": "281fcb369639668d",
        "name": "function 49",
        "func": "msg.payload = `Bienvenido!`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 940,
        "wires": [
            [
                "e0094fa20b5e0ce3"
            ]
        ]
    },
    {
        "id": "e0094fa20b5e0ce3",
        "type": "ui_audio",
        "z": "281fcb369639668d",
        "name": "",
        "group": "e9dac18c3e8fef5a",
        "voice": "urn:moz-tts:sapi:Microsoft Zira Desktop - English (United States)?en-US",
        "always": "",
        "x": 1260,
        "y": 920,
        "wires": []
    },
    {
        "id": "8c0e30d2bde245cc",
        "type": "ui_text_input",
        "z": "86122041a3705953",
        "name": "Dias de Estacionamiento",
        "label": "Dias de Estacionamiento",
        "tooltip": "",
        "group": "e9dac18c3e8fef5a",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "number",
        "delay": 300,
        "topic": "payload",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 210,
        "y": 180,
        "wires": [
            [
                "a0ac432ba7c8164e"
            ]
        ]
    },
    {
        "id": "f74f2d007530b1b7",
        "type": "ui_button",
        "z": "86122041a3705953",
        "name": "",
        "group": "e9dac18c3e8fef5a",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "Generar Folio Pensión",
        "tooltip": "",
        "color": "white",
        "bgcolor": "green",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 640,
        "y": 180,
        "wires": [
            [
                "35b9e70175f5eee5"
            ]
        ]
    },
    {
        "id": "a12019389423ccba",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnInsertarFolio",
        "func": "const now = new Date();\nvar dias = global.get(\"gblVardias\");\nvar costo;\nvar fechaSalidaPension;\n\nfechaSalidaPension = global.get(\"gblFechaSalidaPension\");\ncosto= dias * 100;\n\n// Formatear la fecha y hora en el formato de MySQL\nconst formattedDate = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\nconst formatoSalidaPs = `${fechaSalidaPension.getFullYear()}-${(fechaSalidaPension.getMonth() + 1).toString().padStart(2, '0')}-${fechaSalidaPension.getDate().toString().padStart(2, '0')} ${fechaSalidaPension.getHours().toString().padStart(2, '0')}:${fechaSalidaPension.getMinutes().toString().padStart(2, '0')}:${fechaSalidaPension.getSeconds().toString().padStart(2, '0')}`;\nconst formatoSalidaP = `${fechaSalidaPension.getFullYear()}-${(fechaSalidaPension.getMonth() + 1).toString().padStart(2, '0')}-${fechaSalidaPension.getDate().toString().padStart(2, '0')}`;\n\nmsg.topic = `INSERT INTO folios_est (fecha_ingreso,fecha_fin,dias_est,costo,tipo_folio) \n VALUES ('${formattedDate}','${formatoSalidaP} 23:59:59',${dias},${costo},'PENSION');`;\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 280,
        "wires": [
            [
                "e1f51e61aa5f586d",
                "c2530188f2bb4a23"
            ]
        ]
    },
    {
        "id": "e1f51e61aa5f586d",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "86122041a3705953",
        "name": "",
        "x": 670,
        "y": 280,
        "wires": [
            [
                "ba64916857ea48d8"
            ]
        ]
    },
    {
        "id": "e5bec2987b522029",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "86122041a3705953",
        "name": "",
        "x": 310,
        "y": 280,
        "wires": [
            [
                "a12019389423ccba"
            ]
        ]
    },
    {
        "id": "7178908feef46349",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnLockTable",
        "func": "if (msg.seguirFlujo = true){\n    msg.topic = `lock table folios_est write;`;\n}\n\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 280,
        "wires": [
            [
                "e5bec2987b522029"
            ]
        ]
    },
    {
        "id": "999708543039de8f",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 340,
        "wires": [
            [
                "104a8f433b59a6b0"
            ]
        ]
    },
    {
        "id": "104a8f433b59a6b0",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "86122041a3705953",
        "name": "",
        "x": 550,
        "y": 340,
        "wires": [
            [
                "62161fe7ee2316b2",
                "15f0de8453bc7640"
            ]
        ]
    },
    {
        "id": "62161fe7ee2316b2",
        "type": "debug",
        "z": "86122041a3705953",
        "name": "INSERTA NUM2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "imprimeFolio1",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 380,
        "wires": []
    },
    {
        "id": "bcf48a0f8ffa4880",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnDeclaraVarGlobales",
        "func": "var numFolio = msg.payload && msg.payload[0] && msg.payload[0].folio;\n\nglobal.set(\"gblnumFolio\",numFolio);\n\nmsg.topic = 'Se Ingresó Folio Pensión :' + global.get(\"gblnumFolio\")\nmsg.folio =  global.get(\"gblnumFolio\")\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 340,
        "wires": [
            [
                "999708543039de8f",
                "96ac7f449c98f2d9"
            ]
        ]
    },
    {
        "id": "ba64916857ea48d8",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnBuscarFolio",
        "func": "msg.topic = `select * from folios_est order by folio desc limit 1;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 280,
        "wires": [
            [
                "6ee40a93dc66985c"
            ]
        ]
    },
    {
        "id": "6ee40a93dc66985c",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "86122041a3705953",
        "name": "",
        "x": 1030,
        "y": 280,
        "wires": [
            [
                "bcf48a0f8ffa4880"
            ]
        ]
    },
    {
        "id": "96ac7f449c98f2d9",
        "type": "ui_toast",
        "z": "86122041a3705953",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 370,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "15f0de8453bc7640",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnEPL",
        "func": " var strCodBar = msg.folio;\n //flow.get('strCadena'); //msg.payload;\n var z = String(strCodBar);\n\nif (z.length > 1) {\n    msg.payload = \"CT~~CD,~CC^~CT~\\r\\n\"\n    msg.payload += \"^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ\\r\\n\"\n    msg.payload += \"^XA\\r\\n\"\n    msg.payload += \"^MMT\\r\\n\"\n    msg.payload += \"^PW480\\r\\n\"\n    msg.payload += \"^LL0120\\r\\n\"\n    msg.payload += \"^LS0\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT475,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT219,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^PQ1,0,1,Y^XZ\\r\\n\"\n\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 340,
        "wires": [
            [
                "eac4f91f51edc0bd"
            ]
        ]
    },
    {
        "id": "eac4f91f51edc0bd",
        "type": "file",
        "z": "86122041a3705953",
        "name": "creaArchivo",
        "filename": "c:/imprimeWS/imprime.prn",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 850,
        "y": 340,
        "wires": [
            [
                "afde094a6164a3e4"
            ]
        ]
    },
    {
        "id": "afde094a6164a3e4",
        "type": "exec",
        "z": "86122041a3705953",
        "command": "copy /B c:\\imprimeWS\\imprime.prn \\\\192.168.0.38\\hp1",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "execImprime.bat",
        "x": 1020,
        "y": 340,
        "wires": [
            [
                "f0d7e584f07a2e6d"
            ],
            [
                "f0d7e584f07a2e6d"
            ],
            [
                "f0d7e584f07a2e6d",
                "15ad96f3ef3b70e8"
            ]
        ]
    },
    {
        "id": "f0d7e584f07a2e6d",
        "type": "debug",
        "z": "86122041a3705953",
        "name": "tiempo",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1230,
        "y": 320,
        "wires": []
    },
    {
        "id": "c2530188f2bb4a23",
        "type": "debug",
        "z": "86122041a3705953",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "topic",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 240,
        "wires": []
    },
    {
        "id": "a0ac432ba7c8164e",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnValidaDiasEst",
        "func": "var vardias;\n\nif (msg.payload==0){\n        vardias = ' ';\n        \n} else if (msg.payload > 0) {\n    vardias = msg.payload;\n        function sumarDias(fecha, dias) {\n                var nuevaFecha = new Date(fecha);\n                nuevaFecha.setDate(nuevaFecha.getDate() + dias);\n                nuevaFecha.setDate(nuevaFecha.getDate() - 1);\n                return nuevaFecha;\n        }\n\n        var fechaActual = new Date();\n        var fechaConDiasSumados = sumarDias(fechaActual, vardias);\n             \n}else{\n        vardias= ' ';\n}\n\nglobal.set(\"gblVardias\", vardias);\nglobal.set(\"gblFechaSalidaPension\", fechaConDiasSumados)\nmsg.global = global.get(\"gblVardias\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 180,
        "wires": [
            [
                "f74f2d007530b1b7",
                "135be53d554cd2a2"
            ]
        ]
    },
    {
        "id": "135be53d554cd2a2",
        "type": "debug",
        "z": "86122041a3705953",
        "name": "debug 13",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "global",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 140,
        "wires": []
    },
    {
        "id": "42d75cdbdac8c348",
        "type": "function",
        "z": "86122041a3705953",
        "name": "fnReiniciaValores",
        "func": "msg.payload= 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 120,
        "wires": [
            [
                "8c0e30d2bde245cc"
            ]
        ]
    },
    {
        "id": "cb1af4a0f3308e1e",
        "type": "switch",
        "z": "86122041a3705953",
        "name": "",
        "property": "validaAccion",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "caso1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "caso2",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1050,
        "y": 180,
        "wires": [
            [
                "569fc6ba44db91f2"
            ],
            [
                "10a112577249f1f9"
            ]
        ]
    },
    {
        "id": "35b9e70175f5eee5",
        "type": "function",
        "z": "86122041a3705953",
        "name": "function 15",
        "func": "var numDias  = global.get(\"gblVardias\");\n\nif (numDias==0){\n    msg.validaAccion = \"caso1\";\n}else if (msg.payload >= 1){\n    msg.validaAccion = \"caso2\";\n} else{\n    msg.validaAccion = \"caso1\";\n}\nmsg.numDias = numDias;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 180,
        "wires": [
            [
                "cb1af4a0f3308e1e",
                "d424c0e76a5a7a79",
                "4da840ab2a59ad12"
            ]
        ]
    },
    {
        "id": "d424c0e76a5a7a79",
        "type": "debug",
        "z": "86122041a3705953",
        "name": "debug 16",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "validaAccion",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 80,
        "wires": []
    },
    {
        "id": "569fc6ba44db91f2",
        "type": "function",
        "z": "86122041a3705953",
        "name": "function 16",
        "func": "if (msg.validaAccion == \"caso1\"){\n    msg.topic = 'Ingrese un numero Mayor a 0';\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 160,
        "wires": [
            [
                "191e441777f890f2"
            ]
        ]
    },
    {
        "id": "191e441777f890f2",
        "type": "ui_toast",
        "z": "86122041a3705953",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1350,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "10a112577249f1f9",
        "type": "function",
        "z": "86122041a3705953",
        "name": "function 17",
        "func": "if (msg.validaAccion == \"caso2\"){\n    msg.seguirFlujo = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 200,
        "wires": [
            [
                "33cb1969b92bfe0a"
            ]
        ]
    },
    {
        "id": "4da840ab2a59ad12",
        "type": "debug",
        "z": "86122041a3705953",
        "name": "debug 17",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 120,
        "wires": []
    },
    {
        "id": "15ad96f3ef3b70e8",
        "type": "link out",
        "z": "86122041a3705953",
        "name": "linkOutReiniciaValoresDias",
        "mode": "link",
        "links": [
            "5088e9c33665a2b9"
        ],
        "x": 1245,
        "y": 360,
        "wires": []
    },
    {
        "id": "5088e9c33665a2b9",
        "type": "link in",
        "z": "86122041a3705953",
        "name": "linkInReiniciaValoresDias",
        "links": [
            "15ad96f3ef3b70e8"
        ],
        "x": 65,
        "y": 80,
        "wires": [
            [
                "42d75cdbdac8c348"
            ]
        ]
    },
    {
        "id": "833fbbed8b825ffc",
        "type": "link in",
        "z": "86122041a3705953",
        "name": "link-in-ContinuarFlujoTicPen",
        "links": [
            "33cb1969b92bfe0a"
        ],
        "x": 35,
        "y": 280,
        "wires": [
            [
                "7178908feef46349"
            ]
        ]
    },
    {
        "id": "33cb1969b92bfe0a",
        "type": "link out",
        "z": "86122041a3705953",
        "name": "link-Out-ContinuarFlujoTicPen",
        "mode": "link",
        "links": [
            "833fbbed8b825ffc"
        ],
        "x": 1365,
        "y": 200,
        "wires": []
    },
    {
        "id": "d92d9606d281af84",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tipo de Boleto",
        "format": "{{msg.str_resultado}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 960,
        "y": 240,
        "wires": []
    },
    {
        "id": "26ec80acd0d6a3e2",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnBuscaFolios",
        "func": "var numFolio;\nnumFolio= msg.payload;\n\n    msg.topic = `select * from folios_est \n    where folio='${numFolio}' order by folio desc ;`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 140,
        "wires": [
            [
                "8f2004bfc22ca57b"
            ]
        ]
    },
    {
        "id": "d79f7726749c9336",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnValidaFolios",
        "func": "var blnValor;\n\n// Incorporacion de otro Flujo\nvar fechaInicio = Date.now();\nvar fechaFin = global.get(\"gblFechaIni\");\nvar validaTipo = global.get(\"gblTipo\");\nvar dias = global.get(\"gblDias\");\nvar folioF = global.get(\"gblFolio\");\nvar pagarPrecio;\n\nvar diffEnMinutos = Math.floor((fechaInicio - fechaFin) / (1000 * 60));\nvar horasRedondeadas = Math.ceil(diffEnMinutos / 60); // Cambiado a Math.ceil\nvar diasRedondeados = Math.max(Math.round(horasRedondeadas / 24), 1);\n// Termina incorporación\n\n\nblnValor = msg.verdadero;\nmsg.valor= blnValor;\n\nmsg.este = global.get(\"gblPlaca\");\n\nif (blnValor !== true  ){\n    msg.fechaSalida = \"- - -\";\n    msg.fecha = \"- - -\";\n    msg.str_resultado = \"El Folio no Existe.\";\n    msg.pago = '$ ' + '0.00 MXN';\n    msg.payload = false;\n    msg.acceso = \"- - -\"\n    msg.tiempo = '- - -';\n}else{\n    if (global.get(\"gblTipo\") !== undefined) {\n    \n        if (global.get(\"gblTipo\") === \"NORMAL\"){\n            var intPagar = horasRedondeadas * 10;\n            msg.fechaSalida = Date.now()\n            msg.pago = '$ ' + intPagar + '.00 MXN';\n            msg.tiempo = horasRedondeadas + ' Hr';\n            msg.folio = folioF;\n        } else if (global.get(\"gblTipo\") === \"PENSION\"){\n            var intPagar = dias * 100;\n            msg.fechaSalida = global.get(\"gblFechaSalida\")\n            msg.pago = '$ ' + intPagar + '.00 MXN';\n            msg.tiempo = dias + ' D';\n            msg.folio = folioF;\n        }else{\n            msg.fechaSalida=\"- - -\"\n            var intPagar = dias * 100;\n            msg.pago = '$ ' + '0.00 MXN';\n            msg.tiempo = '- - -';\n            msg.folio = folioF;\n        }\n\n        msg.str_resultado = global.get(\"gblTipo\");\n        msg.fecha = global.get(\"gblFechaIni\");\n        msg.payload = true;\n        msg.acceso = \"Entrar\"\n\n    } else {\n        msg.str_resultado = \"No Existe\";\n        msg.fecha= \"Sin datos\";\n        msg.fechaSalida = \"Sin datos\"\n        msg.payload = false;\n        msg.acceso = \"No entrar\";\n    }\n}\n\nglobal.set(\"glbPrecio\", intPagar);\nglobal.set(\"gblHorasEst\", horasRedondeadas)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 220,
        "wires": [
            [
                "d92d9606d281af84",
                "853dc82bdf19f482",
                "0702a2b4a8cd3da1",
                "c152c70dc54dc9d4",
                "39afdad786c3045b",
                "02418eaf506836ac",
                "14cf33c708301516",
                "5344ed10fefb30c1"
            ]
        ]
    },
    {
        "id": "853dc82bdf19f482",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "RESULTADO VALIDAFOLIOS",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 160,
        "wires": []
    },
    {
        "id": "8f2004bfc22ca57b",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 630,
        "y": 140,
        "wires": [
            [
                "c2b71c855f1b8536",
                "617c12dc8b9ffd75"
            ]
        ]
    },
    {
        "id": "0f5414ebac4e2738",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Fecha de ingreso",
        "format": "{{msg.fecha}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1230,
        "y": 320,
        "wires": []
    },
    {
        "id": "0702a2b4a8cd3da1",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "RESULTADO ACCESO",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "acceso",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 200,
        "wires": []
    },
    {
        "id": "c2b71c855f1b8536",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "QUERY BUSQUEDA",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 980,
        "y": 40,
        "wires": []
    },
    {
        "id": "617c12dc8b9ffd75",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnDeclaraVarGlobales",
        "func": "var tipo = msg.payload && msg.payload[0] && msg.payload[0].tipo_folio;\nvar fechaIni = msg.payload && msg.payload[0] && msg.payload[0].fecha_ingreso;\nvar fechaFin = msg.payload && msg.payload[0] && msg.payload[0].fecha_fin;\nvar dias_est1 = msg.payload && msg.payload[0] && msg.payload[0].dias_est;\nvar folio = msg.payload && msg.payload[0] && msg.payload[0].folio;\nvar datos = msg.payload ;\n\nglobal.set(\"gblTipo\",tipo);\nglobal.set(\"gblFechaIni\",fechaIni);\nglobal.set(\"gblDias\",dias_est1);\nglobal.set(\"gblFolio\",folio);\nglobal.set(\"gblFechaSalida\", fechaFin);\nglobal.set(\"datos\",datos);\n\nmsg.folio= global.get(\"gblFolio\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 180,
        "wires": [
            [
                "3298a7c7a8b4fb5c",
                "7dbd8f32d369edbc"
            ]
        ]
    },
    {
        "id": "b28f3b44246d48fd",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnVariableGlobalQuery",
        "func": "msg.payload= global.get(\"datos\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 180,
        "wires": [
            [
                "b90e8bc7a0c0b839"
            ]
        ]
    },
    {
        "id": "b90e8bc7a0c0b839",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "QUERY COMPLETO BUSCA FOLIOS",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1030,
        "y": 120,
        "wires": []
    },
    {
        "id": "83658a9302d8bb90",
        "type": "moment",
        "z": "2a8d06e593a2285c",
        "name": "formatoFechaIngreso",
        "topic": "",
        "input": "fecha",
        "inputType": "msg",
        "inTz": "America/Mexico_City",
        "adjAmount": 0,
        "adjType": "minutes",
        "adjDir": "add",
        "format": "LLL",
        "locale": "es_ES",
        "output": "fecha",
        "outputType": "msg",
        "outTz": "America/Mexico_City",
        "x": 1240,
        "y": 360,
        "wires": [
            [
                "0f5414ebac4e2738"
            ]
        ]
    },
    {
        "id": "c152c70dc54dc9d4",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Total a Pagar",
        "format": "{{msg.pago}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 950,
        "y": 280,
        "wires": []
    },
    {
        "id": "39afdad786c3045b",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Tiempo Estacionado",
        "format": "{{msg.tiempo}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 980,
        "y": 320,
        "wires": []
    },
    {
        "id": "4acc330b04a7f5f1",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "tiempo",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 420,
        "wires": []
    },
    {
        "id": "16814040d68c84b4",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnEPL",
        "func": " var strCodBar = msg.folio;\n //flow.get('strCadena'); //msg.payload;\n var z = String(strCodBar);\n\nif (z.length > 1) {\n    msg.payload = \"CT~~CD,~CC^~CT~\\r\\n\"\n    msg.payload += \"^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR5,5~SD15^JUS^LRN^CI0^XZ\\r\\n\"\n    msg.payload += \"^XA\\r\\n\"\n    msg.payload += \"^MMT\\r\\n\"\n    msg.payload += \"^PW480\\r\\n\"\n    msg.payload += \"^LL0120\\r\\n\"\n    msg.payload += \"^LS0\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT475,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^BY3,2,56^FT219,59^B8I,,Y,N\\r\\n\"\n    msg.payload += \"^FD\"+strCodBar+\"^FS\\r\\n\"\n    msg.payload += \"^PQ1,0,1,Y^XZ\\r\\n\"\n\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 280,
        "wires": [
            [
                "ee977df5e10d35e8"
            ]
        ]
    },
    {
        "id": "ee977df5e10d35e8",
        "type": "file",
        "z": "2a8d06e593a2285c",
        "name": "creaArchivo",
        "filename": "c:/imprimeWS/imprime.prn",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 550,
        "y": 320,
        "wires": [
            [
                "a1589c8df78b5602"
            ]
        ]
    },
    {
        "id": "a1589c8df78b5602",
        "type": "exec",
        "z": "2a8d06e593a2285c",
        "command": "copy /B c:\\imprimeWS\\imprime.prn \\\\192.168.0.38\\hp1",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "execImprime.bat",
        "x": 560,
        "y": 360,
        "wires": [
            [
                "4acc330b04a7f5f1"
            ],
            [
                "4acc330b04a7f5f1"
            ],
            [
                "4acc330b04a7f5f1"
            ]
        ]
    },
    {
        "id": "d77e236d3e057e71",
        "type": "ui_text_input",
        "z": "2a8d06e593a2285c",
        "name": "",
        "label": "Ingresar Num Folio :",
        "tooltip": "",
        "group": "8135167c221b806c",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "number",
        "delay": "10",
        "topic": "payload",
        "sendOnBlur": false,
        "className": "",
        "topicType": "msg",
        "x": 200,
        "y": 140,
        "wires": [
            [
                "26ec80acd0d6a3e2",
                "bbd816db156695be"
            ]
        ]
    },
    {
        "id": "a4b51896941d211c",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Moneda : 10",
        "group": "8135167c221b806c",
        "order": 16,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 10",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "moneda10",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 560,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "b92a52c0caba310b",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Moneda : 2",
        "group": "8135167c221b806c",
        "order": 18,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 2",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "moneda2",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 640,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "0e6b9d356bde85af",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Moneda :5",
        "group": "8135167c221b806c",
        "order": 17,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 5",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "moneda5",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 600,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "6606f6d37c24162e",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Moneda : 1",
        "group": "8135167c221b806c",
        "order": 19,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 1",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "moneda1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 680,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "eb0d5b3ec601a8f1",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 7,
        "width": "3",
        "height": "1",
        "name": "",
        "label": "TOTAL INGRESADO",
        "format": "{{msg.totalIngresado1}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 680,
        "y": 640,
        "wires": []
    },
    {
        "id": "7131d71141e8181e",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnSumarMonedas",
        "func": "let total = global.get(\"totalIngresado\") || 0;  // Obtener el total almacenado en la variable de flujo\n\nif (msg.payload === \"moneda10\") {\n    total += 10;\n} else if (msg.payload === \"moneda5\") {\n    total += 5;\n} else if (msg.payload === \"moneda2\") {\n    total += 2;\n} else if (msg.payload === \"moneda1\") {\n    total += 1;\n} else if(msg.payload === \"Reiniciar\"){\n    total = 0;\n    msg.payload= false;\n} else if (msg.payload === \"Billete500\") {\n    total += 500;\n} else if (msg.payload === \"Billete200\") {\n    total += 200;\n} else if (msg.payload === \"Billete100\") {\n    total += 100;\n} else if (msg.payload === \"Billete50\") {\n    total += 50;\n} else if (msg.payload === \"Billete20\") {\n    total += 20;\n}else {\n    return null;\n}\n\nglobal.set(\"totalIngresado\", total);  \n\nmsg.totalIngresado = total;\nmsg.payload=total;\nreturn msg;\n// return { payload: total };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 700,
        "wires": [
            [
                "32ae9d8ec911d862",
                "5dbcaea5a62dea2a",
                "6bfa45d99454489c",
                "b1b3a1007fbcd996"
            ]
        ]
    },
    {
        "id": "32ae9d8ec911d862",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "debug 14",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 600,
        "wires": []
    },
    {
        "id": "5dbcaea5a62dea2a",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnCalculaCuantasMonedasDevolver",
        "func": "var precioCobrar = global.get(\"glbPrecio\")\nvar totalingresado = global.get(\"totalIngresado\")\nvar cambiomoneda ;\n\nif (precioCobrar === totalingresado){\n    cambiomoneda = 0;\n} else if (totalingresado === 0){\n    cambiomoneda = 0;\n}else if(precioCobrar > totalingresado){\n    cambiomoneda = 0;\n}else if(precioCobrar == 0){\n    cambiomoneda= totalingresado;\n}else {\n    cambiomoneda = precioCobrar - totalingresado;\n    cambiomoneda = cambiomoneda * -1\n}\n\nglobal.set(\"cambioMN\", cambiomoneda);\nmsg.devolver = cambiomoneda;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 720,
        "wires": [
            [
                "eadd5758c838040b",
                "84af5abe31996d09",
                "d4626b980e0be136"
            ]
        ]
    },
    {
        "id": "84af5abe31996d09",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 20,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "Devolver",
        "format": "{{msg.devolver}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1160,
        "y": 640,
        "wires": []
    },
    {
        "id": "eadd5758c838040b",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "debug 15",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "devolver",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 600,
        "wires": []
    },
    {
        "id": "3298a7c7a8b4fb5c",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnValidaPaseFlujo",
        "func": "var srcFolio = global.get(\"gblFolio\");\n\nif(srcFolio !== undefined){\n    msg.verdadero = true;\n}else{\n    msg.verdadero = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 180,
        "wires": [
            [
                "d79f7726749c9336",
                "b28f3b44246d48fd"
            ]
        ]
    },
    {
        "id": "d4626b980e0be136",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnIndicaQueMonedasDevolver",
        "func": "var devolverMN;\nvar nuevoValorMN;\nvar conteoLed10;\nvar conteoLed5;\nvar conteoLed2;\nvar conteoLed1;\n\ndevolverMN = global.get(\"cambioMN\");\n\nwhile (devolverMN > 0) {\n    if (devolverMN >= 10){\n        conteoLed10 = devolverMN / 10;\n        nuevoValorMN = Math.floor(conteoLed10) * 10;\n        devolverMN = devolverMN - nuevoValorMN;\n        msg.conteoLEd10 = Math.floor(conteoLed10);\n    } else if (devolverMN >= 5) {\n        conteoLed5 = devolverMN / 5;\n        nuevoValorMN = Math.floor(conteoLed5) * 5;\n        devolverMN = devolverMN - nuevoValorMN;\n        msg.conteoLEd5 = Math.floor(conteoLed5);\n    } else if (devolverMN >= 2) {\n        conteoLed2 = devolverMN / 2;\n        nuevoValorMN = Math.floor(conteoLed2) * 2;\n        devolverMN = devolverMN - nuevoValorMN;\n        msg.conteoLEd2 = Math.floor(conteoLed2);\n    } else if (devolverMN >= 1) {\n        conteoLed1 = devolverMN / 1;\n        nuevoValorMN = Math.floor(conteoLed1) * 1;\n        devolverMN = devolverMN - nuevoValorMN;\n        msg.conteoLEd1 = Math.floor(conteoLed1);\n    }\n}\n\nmsg.devolverMN = devolverMN;\nmsg.devolver = devolverMN;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 760,
        "wires": [
            [
                "1c85254adda95375",
                "cb8f461904fac94e"
            ]
        ]
    },
    {
        "id": "1c85254adda95375",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "contador",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "devolverMN",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 680,
        "wires": []
    },
    {
        "id": "cb8f461904fac94e",
        "type": "delay",
        "z": "2a8d06e593a2285c",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 960,
        "y": 780,
        "wires": [
            [
                "5f3199dedc0310d8",
                "750abb6404350f9b",
                "fca7db0a3061845e",
                "8382a65b3c746fc3"
            ]
        ]
    },
    {
        "id": "8382a65b3c746fc3",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 21,
        "width": "3",
        "height": "1",
        "name": "",
        "label": "Monedas de 10 :",
        "format": "{{msg.conteoLEd10}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "Arial Black,Arial Black,Gadget,sans-serif",
        "fontSize": 16,
        "color": "#000000",
        "x": 1190,
        "y": 720,
        "wires": []
    },
    {
        "id": "fca7db0a3061845e",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 24,
        "width": "3",
        "height": "1",
        "name": "",
        "label": "Monedas de 1 :",
        "format": "{{msg.conteoLEd1}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1180,
        "y": 840,
        "wires": []
    },
    {
        "id": "5f3199dedc0310d8",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 22,
        "width": "3",
        "height": "1",
        "name": "",
        "label": "Monedas de 5 :",
        "format": "{{msg.conteoLEd5}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1180,
        "y": 760,
        "wires": []
    },
    {
        "id": "750abb6404350f9b",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 23,
        "width": "3",
        "height": "1",
        "name": "",
        "label": "Monedas de 2 :",
        "format": "{{msg.conteoLEd2}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1180,
        "y": 800,
        "wires": []
    },
    {
        "id": "83d8334c7965d8b5",
        "type": "moment",
        "z": "2a8d06e593a2285c",
        "name": "formatoFechaSalida",
        "topic": "",
        "input": "fechaSalida",
        "inputType": "msg",
        "inTz": "America/Mexico_City",
        "adjAmount": 0,
        "adjType": "minutes",
        "adjDir": "add",
        "format": "LLL",
        "locale": "es_ES",
        "output": "fechaSalida",
        "outputType": "msg",
        "outTz": "America/Mexico_City",
        "x": 1240,
        "y": 440,
        "wires": [
            [
                "565727c22139c0ec"
            ]
        ]
    },
    {
        "id": "565727c22139c0ec",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Fecha Salida",
        "format": "{{msg.fechaSalida}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1210,
        "y": 400,
        "wires": []
    },
    {
        "id": "bbd816db156695be",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnReiniciarValor",
        "func": "msg.payload = \"Reiniciar\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 460,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "9a3dd136c28d910c",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnRealizarCobroRegistrarHist",
        "func": "var totalPagar = global.get(\"glbPrecio\");\nvar dineroIngresado = global.get(\"totalIngresado\") \n\nif (totalPagar == 0){\n    msg.resultadoTotal = \"Total Pagar = 0, No se Cobra\";\n    msg.payload = false;\n\n} else if(dineroIngresado >= totalPagar){\n    msg.resultadoTotal= \"Se Completo el registro\";\n    msg.payload = true;\n\n} else if (dineroIngresado == 0){\n    msg.resultadoTotal = \"No se cobra\";\n    msg.payload = false;\n\n} else if (dineroIngresado < totalPagar){\n    msg.resultadoTotal = \"No es Mayor\";\n    msg.payload= false;\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 1180,
        "wires": [
            [
                "f5cd2c0804b4c3ea",
                "5ac768b6ecb07f29"
            ]
        ]
    },
    {
        "id": "f5cd2c0804b4c3ea",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "Resultado Num",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "resultadoTotal",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1140,
        "wires": []
    },
    {
        "id": "676566f0a7fdb7a8",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnInsertarHistoricoFolio",
        "func": "const now = new Date();\nvar dFechaingreso = global.get(\"gblFechaIni\");\nvar dFechaSalida = global.get(\"gblFechaSalida\");\n\n\nconst formatFechaIngreso = `${dFechaingreso.getFullYear()}-${(dFechaingreso.getMonth() + 1).toString().padStart(2, '0')}-${dFechaingreso.getDate().toString().padStart(2, '0')} ${dFechaingreso.getHours().toString().padStart(2, '0')}:${dFechaingreso.getMinutes().toString().padStart(2, '0')}:${dFechaingreso.getSeconds().toString().padStart(2, '0')}`;\nconst formatFechaSalida = `${dFechaSalida.getFullYear()}-${(dFechaSalida.getMonth() + 1).toString().padStart(2, '0')}-${dFechaSalida.getDate().toString().padStart(2, '0')} ${dFechaSalida.getHours().toString().padStart(2, '0')}:${dFechaSalida.getMinutes().toString().padStart(2, '0')}:${dFechaSalida.getSeconds().toString().padStart(2, '0')}`;\nconst formattedDate = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\n\n// CARGAR LOS VARIABLES\nvar folioH = global.get(\"gblFolio\");\nvar fechaIngreso = formatFechaIngreso;\nvar fechaSalida = formatFechaSalida;\nvar estacionamiento = \"EST_TAQ-016\"\nvar dias_est = global.get(\"gblDias\");\nvar horas_est = global.get(\"gblHorasEst\");\nvar costo = global.get(\"glbPrecio\");\nvar fecha_cobro = formattedDate; \nvar tipo_folio = global.get(\"gblTipo\");\nvar costo_2 = 0;\nvar fecha_cobro_2 = '1901-01-01 23:59:59';\n\n\nif (tipo_folio == \"NORMAL\") {\n    fechaSalida = formattedDate;\n} else {\n    fechaSalida = formatFechaSalida;\n}\n\n\nmsg.topic = `insert into hist_est_folios (folio,fecha_ingreso,fecha_salida,estacionamiento,dias_est,horas_est,costo,fecha_cobro,tipo_folio,costo_2,fecha_cobro_2) \n VALUES (${folioH},'${fechaIngreso}','${fechaSalida}','${estacionamiento}','${dias_est}',\n'${horas_est}','${costo}','${fecha_cobro}','${tipo_folio}','${costo_2}','${fecha_cobro_2}');`;\n\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1220,
        "wires": [
            [
                "fdee30028dd43346",
                "f0c27d6e0b5233d0"
            ]
        ]
    },
    {
        "id": "fdee30028dd43346",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 750,
        "y": 1220,
        "wires": [
            [
                "97a0f6f7261aca6c"
            ]
        ]
    },
    {
        "id": "0ba1b329c6d97492",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 330,
        "y": 1220,
        "wires": [
            [
                "676566f0a7fdb7a8"
            ]
        ]
    },
    {
        "id": "1fdfbb55715c9456",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnLockTable",
        "func": "if (msg.payload===true){\nmsg.topic = `lock table hist_est_folios write;`;\nreturn msg;\n}\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 130,
        "y": 1220,
        "wires": [
            [
                "0ba1b329c6d97492"
            ]
        ]
    },
    {
        "id": "97a0f6f7261aca6c",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 140,
        "y": 1260,
        "wires": [
            [
                "bd3580ecb213bce2"
            ]
        ]
    },
    {
        "id": "bd3580ecb213bce2",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 330,
        "y": 1260,
        "wires": [
            [
                "18e5296fd4c6f71f"
            ]
        ]
    },
    {
        "id": "18e5296fd4c6f71f",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnMuestraNotificaciones",
        "func": "var devolver = global.get(\"cambioMN\");\n\nmsg.reiniciarValor = 0;\nmsg.topic='Se Guardó correctamente.';\n\nif (devolver == 0){\n    msg.payload = `Pago Correcto`;\n} else if (devolver == 1){\n    msg.payload = `Devolver ${devolver} peso`;\n}else{\n    msg.payload = `Devolver ${devolver} pesos`;\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1260,
        "wires": [
            [
                "73c4e72321b7bb43",
                "9cf70219a914f28a",
                "a0404b7718ade325",
                "756aa8a612a00673"
            ]
        ]
    },
    {
        "id": "73c4e72321b7bb43",
        "type": "ui_toast",
        "z": "2a8d06e593a2285c",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "green",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "className": "",
        "topic": "",
        "name": "",
        "x": 750,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "f0c27d6e0b5233d0",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "QUERY HISTORICO",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 780,
        "y": 1180,
        "wires": []
    },
    {
        "id": "5ac768b6ecb07f29",
        "type": "delay",
        "z": "2a8d06e593a2285c",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 1180,
        "wires": [
            [
                "1fdfbb55715c9456"
            ]
        ]
    },
    {
        "id": "7dbd8f32d369edbc",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "MuestraFolio",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "folio",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 210,
        "y": 220,
        "wires": []
    },
    {
        "id": "9cf70219a914f28a",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnReiniciarValoresIniciales",
        "func": "global.get(\"totalIngresado\") ;\nmsg.payload = msg.reiniciarValor;\nmsg.totalIngresado = msg.reiniciarValor;\nmsg.verdadero=false;\nglobal.get(\"cambioMN\");\n\nvar ingr = global.get(\"totalIngresado\");\nmsg.ingr = ingr;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 1260,
        "wires": [
            [
                "12345678.abcdef",
                "123ad2718d3ece17",
                "a70a7c97056126fa",
                "aa0d1bc816aef9e6"
            ]
        ]
    },
    {
        "id": "02418eaf506836ac",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "MUESTRA VERDADERO",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "valor",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 80,
        "wires": []
    },
    {
        "id": "12345678.abcdef",
        "type": "change",
        "z": "2a8d06e593a2285c",
        "name": "TotalMnIngresado",
        "rules": [
            {
                "t": "set",
                "p": "totalIngresado",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1070,
        "y": 1220,
        "wires": [
            [
                "1af039b222497c28"
            ]
        ]
    },
    {
        "id": "ea21bb63e41ea641",
        "type": "link in",
        "z": "2a8d06e593a2285c",
        "name": "link in 1",
        "links": [
            "123ad2718d3ece17"
        ],
        "x": 55,
        "y": 140,
        "wires": [
            [
                "d77e236d3e057e71"
            ]
        ]
    },
    {
        "id": "123ad2718d3ece17",
        "type": "link out",
        "z": "2a8d06e593a2285c",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "aa8ccbe5eca9b219",
            "ea21bb63e41ea641"
        ],
        "x": 1005,
        "y": 1260,
        "wires": []
    },
    {
        "id": "aa8ccbe5eca9b219",
        "type": "link in",
        "z": "2a8d06e593a2285c",
        "name": "link in 2",
        "links": [
            "123ad2718d3ece17"
        ],
        "x": 435,
        "y": 220,
        "wires": [
            [
                "d79f7726749c9336"
            ]
        ]
    },
    {
        "id": "1af039b222497c28",
        "type": "link out",
        "z": "2a8d06e593a2285c",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "6573c2794de9fe45"
        ],
        "x": 1215,
        "y": 1220,
        "wires": []
    },
    {
        "id": "6573c2794de9fe45",
        "type": "link in",
        "z": "2a8d06e593a2285c",
        "name": "link in 3",
        "links": [
            "1af039b222497c28"
        ],
        "x": 445,
        "y": 640,
        "wires": [
            [
                "eb0d5b3ec601a8f1",
                "6bfa45d99454489c"
            ]
        ]
    },
    {
        "id": "a70a7c97056126fa",
        "type": "change",
        "z": "2a8d06e593a2285c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "totalIngresado",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1090,
        "y": 1300,
        "wires": [
            [
                "9ca4507d871ac043"
            ]
        ]
    },
    {
        "id": "9ca4507d871ac043",
        "type": "link out",
        "z": "2a8d06e593a2285c",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "fd27c09db33a8152"
        ],
        "x": 1225,
        "y": 1300,
        "wires": []
    },
    {
        "id": "fd27c09db33a8152",
        "type": "link in",
        "z": "2a8d06e593a2285c",
        "name": "link in 4",
        "links": [
            "9ca4507d871ac043"
        ],
        "x": 505,
        "y": 800,
        "wires": [
            [
                "5dbcaea5a62dea2a"
            ]
        ]
    },
    {
        "id": "6bfa45d99454489c",
        "type": "ui_digital_display",
        "z": "2a8d06e593a2285c",
        "name": "",
        "group": "8135167c221b806c",
        "order": 8,
        "width": "3",
        "height": "1",
        "digits": "8",
        "decimals": "0",
        "x": 660,
        "y": 680,
        "wires": []
    },
    {
        "id": "a0404b7718ade325",
        "type": "ui_audio",
        "z": "2a8d06e593a2285c",
        "name": "",
        "group": "25b503f9b6a954f4",
        "voice": "urn:moz-tts:sapi:Microsoft Pablo - Spanish (Spain)?es-ES",
        "always": "",
        "x": 740,
        "y": 1340,
        "wires": []
    },
    {
        "id": "eacb7aaa4a097230",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Billete : 100",
        "group": "8135167c221b806c",
        "order": 12,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 100",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "Billete100",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 800,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "0f758f24dd07ece8",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Billete : 20",
        "group": "8135167c221b806c",
        "order": 14,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 20",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "Billete20",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 880,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "e6549b22cbdc1ea7",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Billete : 50",
        "group": "8135167c221b806c",
        "order": 13,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 50",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "Billete50",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 840,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "9cde949f04ccada4",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Billete : 200",
        "group": "8135167c221b806c",
        "order": 11,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 200",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "Billete200",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 760,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "bcce29226b1fc440",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 9,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Billetes",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 100,
        "y": 520,
        "wires": []
    },
    {
        "id": "bb5d4e21e7e08d70",
        "type": "ui_text",
        "z": "2a8d06e593a2285c",
        "group": "8135167c221b806c",
        "order": 15,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Monedas",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 100,
        "y": 480,
        "wires": []
    },
    {
        "id": "14cf33c708301516",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnValidaFechaSalida",
        "func": "\nif (msg.fechaSalida == \"- - -\") {\n    msg.fechaSalida = \"- - -\";\n    msg.payloadF = \"tres\";\n} else {\n    msg.fechaSalida = msg.fechaSalida;\n    msg.payloadF = \"cuatro\";\n}\n\n return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 400,
        "wires": [
            [
                "9903ebeb0931a3f0"
            ]
        ]
    },
    {
        "id": "9903ebeb0931a3f0",
        "type": "switch",
        "z": "2a8d06e593a2285c",
        "name": "",
        "property": "payloadF",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "uno",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "dos",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "tres",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cuatro",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 1010,
        "y": 380,
        "wires": [
            [
                "0f5414ebac4e2738"
            ],
            [
                "83658a9302d8bb90"
            ],
            [
                "565727c22139c0ec"
            ],
            [
                "83d8334c7965d8b5"
            ]
        ]
    },
    {
        "id": "5344ed10fefb30c1",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnValidaFechaIngreso",
        "func": "\nif (msg.fecha == \"- - -\") {\n    msg.fecha = \"- - -\";\n    msg.payloadF = \"uno\";\n} else{\n    msg.fecha = msg.fecha;\n    msg.payloadF = \"dos\";\n}\n\n\n return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 360,
        "wires": [
            [
                "9903ebeb0931a3f0"
            ]
        ]
    },
    {
        "id": "b1b3a1007fbcd996",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "Manejo del Pago",
        "func": "var totalPagar = global.get(\"glbPrecio\");\nvar dineroIngresado = global.get(\"totalIngresado\") \n\nif (dineroIngresado >= totalPagar) {\n    setTimeout(function() {\n        msg.cancelar = true;\n    }, 30000);                 // 30 segundos de temporizador\n    msg.pagoCompleto = true;\n    msg.payload= msg.pagoCompleto;\n} else {\n    msg.pagoCompleto = false;\n}\n\nflow.set('totalIngresado', dineroIngresado);\nmsg.payload = dineroIngresado;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 960,
        "wires": [
            [
                "8852880b2c0ceeea"
            ]
        ]
    },
    {
        "id": "8852880b2c0ceeea",
        "type": "switch",
        "z": "2a8d06e593a2285c",
        "name": "Pago Completo?",
        "property": "pagoCompleto",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 1000,
        "wires": [
            [
                "6285bb2c6a5af3ae"
            ],
            [
                "dd99e7a3a6df2c71"
            ]
        ]
    },
    {
        "id": "6285bb2c6a5af3ae",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "Temporizador de Cancelación",
        "func": "if (msg.pagoCompleto) {\n    setTimeout(function() {\n        msg.cancelar = true;\n    }, 30000); // 30 segundos de temporizador\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 980,
        "wires": [
            [
                "ebcc2f8272293363"
            ]
        ]
    },
    {
        "id": "dd99e7a3a6df2c71",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "Manejo de Cancelación",
        "func": "if (msg.cancelar == true) {\n    msg.mPago=\"Cancelar la operación\";\n    return null;\n} else {\n    msg.mPago = \"Continuar con la operación\";\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 1020,
        "wires": [
            [
                "40e69717c824fc1a"
            ]
        ]
    },
    {
        "id": "ebcc2f8272293363",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "Bloqueo Temporal",
        "func": "var bloqueoTemporal = flow.get('bloqueoTemporal') || false;\n\nif (msg.pagoCompleto) {\n   flow.set('bloqueoTemporal', true);\n    setTimeout(function() {\n        flow.set('bloqueoTemporal', false);\n    }, 30000);    // 30 segundos de bloqueo\n    msg.mPago = \"Confirmación automática del sistema\";\n    msg.mensaje = msg.mPago;\n}\n\nif (msg.cancelar) {\n    msg.mPago=\"Cancelar la operación\";\n    msg.mensaje = msg.mPago;\n    flow.set('bloqueoTemporal', false);\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 980,
        "wires": [
            [
                "f51d79690f5ae502",
                "9a3dd136c28d910c"
            ]
        ]
    },
    {
        "id": "06fe8a95322054a2",
        "type": "ui_toast",
        "z": "2a8d06e593a2285c",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 440,
        "y": 940,
        "wires": []
    },
    {
        "id": "f51d79690f5ae502",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "Salida True",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "mensaje",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 980,
        "wires": []
    },
    {
        "id": "40e69717c824fc1a",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "Salida False",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "mPago",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 1020,
        "wires": []
    },
    {
        "id": "959ad2caed5bc8ac",
        "type": "ui_toast",
        "z": "2a8d06e593a2285c",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 760,
        "y": 940,
        "wires": []
    },
    {
        "id": "aa0d1bc816aef9e6",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "ingr",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1040,
        "y": 1340,
        "wires": []
    },
    {
        "id": "756aa8a612a00673",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnLockTable",
        "func": "\nmsg.topic = `lock table folios_est write;`;\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 130,
        "y": 1420,
        "wires": [
            [
                "9e63aa90aa0514c7"
            ]
        ]
    },
    {
        "id": "9e63aa90aa0514c7",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 290,
        "y": 1420,
        "wires": [
            [
                "017a55820e2083dd"
            ]
        ]
    },
    {
        "id": "017a55820e2083dd",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnDeleteFolio",
        "func": "const now = new Date();\nvar numFolio = global.get(\"gblFolio\");\n\n// Formatear la fecha y hora en el formato de MySQL\nconst formattedDate = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\n\n\nmsg.topic = `delete from folios_est where folio = ${numFolio};`;\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1420,
        "wires": [
            [
                "282bb7c2407ddea3"
            ]
        ]
    },
    {
        "id": "282bb7c2407ddea3",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 610,
        "y": 1420,
        "wires": [
            [
                "1b5c1b6c30c7c96e"
            ]
        ]
    },
    {
        "id": "1b5c1b6c30c7c96e",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnBuscarFolio",
        "func": "msg.topic = `select * from folios_est order by folio desc limit 1;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 1420,
        "wires": [
            [
                "1e98c328af4ee93b"
            ]
        ]
    },
    {
        "id": "1e98c328af4ee93b",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 950,
        "y": 1420,
        "wires": [
            [
                "0946a7eb9be9e112"
            ]
        ]
    },
    {
        "id": "0946a7eb9be9e112",
        "type": "function",
        "z": "2a8d06e593a2285c",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 140,
        "y": 1460,
        "wires": [
            [
                "e7c0ccdec2058ae7"
            ]
        ]
    },
    {
        "id": "e7c0ccdec2058ae7",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "2a8d06e593a2285c",
        "name": "",
        "x": 310,
        "y": 1460,
        "wires": [
            [
                "6541cf46cba28047"
            ]
        ]
    },
    {
        "id": "3d95bc1445f7a619",
        "type": "ui_button",
        "z": "2a8d06e593a2285c",
        "name": "Billete : 500",
        "group": "8135167c221b806c",
        "order": 10,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "$ 500",
        "tooltip": "",
        "color": "white",
        "bgcolor": "Teal",
        "className": "",
        "icon": "",
        "payload": "Billete500",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 720,
        "wires": [
            [
                "7131d71141e8181e"
            ]
        ]
    },
    {
        "id": "6541cf46cba28047",
        "type": "debug",
        "z": "2a8d06e593a2285c",
        "name": "debug 22",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 1540,
        "wires": []
    },
    {
        "id": "fcf29189cdc714cc",
        "type": "switch",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "property": "salidasResultado",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Completo",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SeguirSumando",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ContarDevolucionDinero",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 530,
        "y": 240,
        "wires": [
            [
                "066314139825d078"
            ],
            [
                "19dd1e7bc1ddc34f"
            ],
            []
        ]
    },
    {
        "id": "19dd1e7bc1ddc34f",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnSeguirSumando",
        "func": "if (msg.salidasResultado == 'SeguirSumando'){\n    msg.seguirSumando ='Seguir Sumando';\n    msg.payload=0;\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 280,
        "wires": [
            [
                "4db5536d4e3f64a7",
                "305a47eeda4e20ea"
            ]
        ]
    },
    {
        "id": "2169f2a327df06d6",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnReiniciarValores",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "066314139825d078",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnCompleto",
        "func": "if (msg.salidasResultado =='Completo'){\n    msg.completo = 'completo';\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 200,
        "wires": [
            [
                "f54f3eab3ebb31ef",
                "435bd8b8df0cf695",
                "0cfe5554879469b9"
            ]
        ]
    },
    {
        "id": "f54f3eab3ebb31ef",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "completo",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "completo",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 140,
        "wires": []
    },
    {
        "id": "4db5536d4e3f64a7",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "seguirSumando",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "seguirSumando",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 280,
        "wires": []
    },
    {
        "id": "291004ccee0e6e85",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_10",
        "x": 120,
        "y": 180,
        "wires": [
            [
                "baff7047e7ed5d93"
            ]
        ]
    },
    {
        "id": "37287f67bf545813",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_5",
        "x": 120,
        "y": 220,
        "wires": [
            [
                "baff7047e7ed5d93"
            ]
        ]
    },
    {
        "id": "e9afa842d852f7c5",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_2",
        "x": 120,
        "y": 260,
        "wires": [
            [
                "baff7047e7ed5d93"
            ]
        ]
    },
    {
        "id": "243859ed636c3b4a",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_1",
        "x": 120,
        "y": 300,
        "wires": [
            [
                "baff7047e7ed5d93"
            ]
        ]
    },
    {
        "id": "baff7047e7ed5d93",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnSumaMonedas",
        "func": "var precio = 10;\nvar monedasIngresadas = global.get('monedasIngresadas') || 0;\nvar monIngCompletado = global.get(\"monIngCompletado\") || 0;\nvar seguirSumando;\nvar devolvermonedas;\n\nglobal.set(\"precioSanit\",precio);\n\n// Manejar el valor de la moneda según el botón presionado\nswitch (msg.topic) {\n    case \"ResetMonedas\":\n        monIngCompletado=1000000000;\n        break;\n    case \"Reiniciar\":\n        monedasIngresadas = 0;\n        break;\n    case \"button_10\":\n        monedasIngresadas += 10;\n        break;\n    case \"button_5\":\n        monedasIngresadas += 5;\n        break;\n    case \"button_2\":\n        monedasIngresadas += 2;\n        break;\n    case \"button_1\":\n        monedasIngresadas += 1;\n        break;\n}\nglobal.set(\"monedasIngresadas\", monedasIngresadas);\n\n// Simular error de ingreso de monedas de más\nif (monIngCompletado >= precio){\n    if (monedasIngresadas >= precio) {\n        monIngCompletado = monedasIngresadas;\n        global.set(\"monIngCompletado\", monIngCompletado)\n        seguirSumando = 0;\n        msg.salidasResultado = 'Completo';\n     \n    } else if (monedasIngresadas < precio) {\n        monIngCompletado = 0;\n        seguirSumando = monedasIngresadas;\n        msg.salidasResultado = 'SeguirSumando';\n  \n    };\n};\n\nmsg.monedasIngresadas = monedasIngresadas;\nmsg.monedaCompleta = monIngCompletado;\nmsg.seguirSumando = seguirSumando;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 240,
        "wires": [
            [
                "c4c7c908a308d089",
                "85c2f31c4448848f",
                "73f12a68d071a0db",
                "fcf29189cdc714cc"
            ]
        ]
    },
    {
        "id": "73f12a68d071a0db",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "monedasIngresadas",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "monedasIngresadas",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 620,
        "y": 140,
        "wires": []
    },
    {
        "id": "85c2f31c4448848f",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "monedaCompleta",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "monedaCompleta",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 100,
        "wires": []
    },
    {
        "id": "646d7bde97c02aeb",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "cambio",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "cambio",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 140,
        "wires": []
    },
    {
        "id": "435bd8b8df0cf695",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnValidaCambioMonedas",
        "func": "var cambio;\nvar totalMonedasIngresadas;\nvar monedaCompleta;\nvar precio = global.get(\"precioSanit\");\n\ntotalMonedasIngresadas = msg.monedasIngresadas;\nmonedaCompleta = global.get('monIngCompletado');\n\ncambio = monedaCompleta - precio;\n\nif (cambio == 0) {\n    cambio = 0;\n} else if (cambio < 0) {\n     cambio = 0;\n} else if(cambio > 0) {\n    cambio = cambio ;\n}\n\nmsg.accionRealizar = true;\nmsg.cambio = cambio;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 180,
        "wires": [
            [
                "646d7bde97c02aeb",
                "318e994101e35435"
            ]
        ]
    },
    {
        "id": "2c3365b495661426",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnReiniciaMonedasIngresadas",
        "func": "if (msg.accionRealizar === true) {\nmsg.topic=\"Reiniciar\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 360,
        "wires": [
            [
                "baff7047e7ed5d93"
            ]
        ]
    },
    {
        "id": "ca70a10f1e038578",
        "type": "link in",
        "z": "a74a8b3a13ece5db",
        "name": "in-ParkingOut",
        "links": [
            "d992a55b038e71fa"
        ],
        "x": 65,
        "y": 360,
        "wires": [
            [
                "2c3365b495661426"
            ]
        ]
    },
    {
        "id": "d992a55b038e71fa",
        "type": "link out",
        "z": "a74a8b3a13ece5db",
        "name": "out-ParkingOut",
        "mode": "link",
        "links": [
            "ca70a10f1e038578"
        ],
        "x": 1295,
        "y": 180,
        "wires": []
    },
    {
        "id": "e9112cd83d863691",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "ResetMonedas",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 120,
        "wires": [
            [
                "5475e91e0113f5be"
            ]
        ]
    },
    {
        "id": "5475e91e0113f5be",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 26",
        "func": "    msg.topic = \"ResetMonedas\"\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 120,
        "wires": [
            [
                "baff7047e7ed5d93"
            ]
        ]
    },
    {
        "id": "c4c7c908a308d089",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "seguirSumando",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "seguirSumando",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 60,
        "wires": []
    },
    {
        "id": "0cfe5554879469b9",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 27",
        "func": "var monedaCompleta;\nmonedaCompleta = global.get('monIngCompletado');\n\nmsg.payload = monedaCompleta;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 220,
        "wires": [
            [
                "c99c3fe5649bcb01"
            ]
        ]
    },
    {
        "id": "c99c3fe5649bcb01",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "llegaValorMonedasCompletadas",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 220,
        "wires": []
    },
    {
        "id": "318e994101e35435",
        "type": "delay",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "pauseType": "delayv",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1160,
        "y": 180,
        "wires": [
            [
                "d992a55b038e71fa",
                "9af1bcca17960768"
            ]
        ]
    },
    {
        "id": "19a6d58096899789",
        "type": "ui_gauge",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "group": "25b503f9b6a954f4",
        "order": 8,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "gauge",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 1450,
        "y": 180,
        "wires": []
    },
    {
        "id": "305a47eeda4e20ea",
        "type": "delay",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "pauseType": "delayv",
        "timeout": "12",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 980,
        "y": 300,
        "wires": [
            [
                "19a6d58096899789"
            ]
        ]
    },
    {
        "id": "9af1bcca17960768",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 29",
        "func": "msg.payload = 50;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 140,
        "wires": [
            [
                "19a6d58096899789"
            ]
        ]
    },
    {
        "id": "17c1b32c.d2d362",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "Cobrar",
        "func": "var montoAcumulado = flow.get('montoAcumulado') || 0;\nvar monedasIngresadas = msg.moneda;  \n\n\nswitch (msg.payload) {\n    case \"button_10\":\n        montoAcumulado += 10;\n        break;\n    case \"button_5\":\n        montoAcumulado += 5;\n        break;\n    case \"button_2\":\n        montoAcumulado += 2;\n        break;\n    case \"button_1\":\n        montoAcumulado += 1;\n        break;\n}\n    var ingresado = montoAcumulado;\n    msg.ingresado = ingresado;\n\n    var cambio = montoAcumulado - 10;\n    if (cambio > 0) {\n        msg.cambio = cambio;\n        montoAcumulado = 0;\n    // ingresado=0;\n    } else if (cambio < 0){\n        msg.cambio = \"0\" ;\n    }else if(cambio = 0){\n        msg.cambio = \"Cobro Correcto! \" + cambio;\n    };\n    \n    \n\nflow.set('montoAcumulado', montoAcumulado);\nmsg.montoAcumulado = montoAcumulado;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 540,
        "wires": [
            [
                "d913c6c7.6fe6b",
                "cafaface4f648488",
                "6ce37075141584c0",
                "b98e329ce9adf5b6",
                "2dadb3be6b9e7045"
            ]
        ]
    },
    {
        "id": "d913c6c7.6fe6b",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 570,
        "y": 600,
        "wires": []
    },
    {
        "id": "cafaface4f648488",
        "type": "change",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "montoAcumulado",
                "pt": "flow",
                "to": "montoAcumulado",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "cambio",
                "pt": "msg",
                "to": "cambio",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 640,
        "wires": [
            [
                "2007e46ff8a8a8a6",
                "2b659547ebdff93e"
            ]
        ]
    },
    {
        "id": "6ce37075141584c0",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "cambio",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "cambio",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 560,
        "wires": []
    },
    {
        "id": "b98e329ce9adf5b6",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "montoAcumulado",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "montoAcumulado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 520,
        "wires": []
    },
    {
        "id": "17acaeb0c158c481",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_10",
        "x": 120,
        "y": 480,
        "wires": [
            [
                "17c1b32c.d2d362"
            ]
        ]
    },
    {
        "id": "d5a3ced1c191880f",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_5",
        "x": 120,
        "y": 520,
        "wires": [
            [
                "17c1b32c.d2d362"
            ]
        ]
    },
    {
        "id": "63066e96f4bb8c9f",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_2",
        "x": 120,
        "y": 560,
        "wires": [
            [
                "17c1b32c.d2d362"
            ]
        ]
    },
    {
        "id": "664522e0dfd70bfe",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_1",
        "x": 120,
        "y": 600,
        "wires": [
            [
                "17c1b32c.d2d362"
            ]
        ]
    },
    {
        "id": "2dadb3be6b9e7045",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "ingresado",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "ingresado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 480,
        "wires": []
    },
    {
        "id": "2b659547ebdff93e",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 30",
        "func": "msg.cambio;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 680,
        "wires": [
            [
                "cd782cae60868291",
                "f59cd5b2ab06f590"
            ]
        ]
    },
    {
        "id": "2007e46ff8a8a8a6",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 31",
        "func": "msg.montoAcumulado;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 620,
        "wires": [
            [
                "db4bf02183edf845"
            ]
        ]
    },
    {
        "id": "db4bf02183edf845",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug montoAcumulado",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "montoAcumulado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1090,
        "y": 620,
        "wires": []
    },
    {
        "id": "cd782cae60868291",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug cambio",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "cambio",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1060,
        "y": 720,
        "wires": []
    },
    {
        "id": "275445c238891cef",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnSumarMonedas",
        "func": "let montoAcumulado = global.get(\"montoAcumulado\") || 0;\n\nswitch (msg.payload) {\n    case \"ResetMonedas\":\n        montoAcumulado = 0;\n        break;\n    case \"button_10\":\n        montoAcumulado += 10;\n        break;\n    case \"button_5\":\n        montoAcumulado += 5;\n        break;\n    case \"button_2\":\n        montoAcumulado += 2;\n        break;\n    case \"button_1\":\n        montoAcumulado += 1;\n        break;\n}\n\nglobal.set(\"montoAcumulado\", montoAcumulado);\nmsg.montoAcumulado = montoAcumulado;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 1080,
        "wires": [
            [
                "78214fc834e2591e",
                "2cbf914452c372b9",
                "2c482131a433a4bc"
            ]
        ]
    },
    {
        "id": "901207d0e42b28e5",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_10",
        "x": 200,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "96bead2e3b38cb61",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_5",
        "x": 200,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "dd020f8963bd4c4f",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_2",
        "x": 200,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "a6c725933b089769",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "button_1",
        "x": 200,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "78214fc834e2591e",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug monedasSumaTotal",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "montoAcumulado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 560,
        "y": 980,
        "wires": []
    },
    {
        "id": "3489325fdb068ff5",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "Cobrar",
        "func": "var montoAcumulado = global.get('montoAcumulado');\nvar valorCambio;\n\nvar cambio = montoAcumulado - 10;\n\nif (cambio > 0) {\n    valorCambio = cambio;\n    montoAcumulado = 0;\n} else if (cambio < 0) {\n    valorCambio = 0;\n} else if (cambio === 0) {\n    valorCambio = \"Cobro Correcto! \" + cambio;\n}\n\nglobal.set(\"valorCambio\", valorCambio);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 1060,
        "wires": [
            [
                "8cdb8a9c692afa6c"
            ]
        ]
    },
    {
        "id": "a0dafd83a8354a16",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "cambio",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "cambio",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1300,
        "y": 1020,
        "wires": []
    },
    {
        "id": "8cdb8a9c692afa6c",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 32",
        "func": "var valorCambio = global.get(\"valorCambio\");\n\nmsg.cambio= valorCambio;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1060,
        "wires": [
            [
                "f5af16a96199d4d4",
                "a0dafd83a8354a16",
                "2db3053a96ea37f3"
            ]
        ]
    },
    {
        "id": "f5af16a96199d4d4",
        "type": "ui_text",
        "z": "a74a8b3a13ece5db",
        "group": "25b503f9b6a954f4",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Devolver :",
        "format": "{{msg.cambio}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1300,
        "y": 1200,
        "wires": []
    },
    {
        "id": "2db3053a96ea37f3",
        "type": "delay",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "pauseType": "delayv",
        "timeout": "4",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "4",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1300,
        "y": 1060,
        "wires": [
            [
                "17218d5d43c6662a"
            ]
        ]
    },
    {
        "id": "0501cfd5f978df41",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "fnSumarMonedas",
        "func": "let montoAcumulado = global.get(\"montoAcumulado\") || 0;\n\nswitch (msg.payload) {\n    case \"button_10\":\n        montoAcumulado += 10;\n        break;\n    case \"button_5\":\n        montoAcumulado += 5;\n        break;\n    case \"button_2\":\n        montoAcumulado += 2;\n        break;\n    case \"button_1\":\n        montoAcumulado += 1;\n        break;\n}\n\nglobal.set(\"montoAcumulado\", montoAcumulado);\n\nmsg.montoAcumulado = montoAcumulado;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2280,
        "wires": [
            [
                "cea26a10fe7deeaa",
                "808a09f890d907d8"
            ]
        ]
    },
    {
        "id": "cea26a10fe7deeaa",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug monedasSumaTotal",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "montoAcumulado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 2140,
        "wires": []
    },
    {
        "id": "3e489733116bde47",
        "type": "change",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "montoAcumulado",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "44fc41ea426f7e44",
        "type": "delay",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "pauseType": "delayv",
        "timeout": "6",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 2340,
        "wires": [
            [
                "3e489733116bde47"
            ]
        ]
    },
    {
        "id": "3ce786711f55f5ea",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "Cobrar",
        "func": "var montoAcumulado = global.get('montoAcumulado');\nvar valorCambio;\n\nvar cambio = montoAcumulado - 10;\n\nif (cambio > 0) {\n    valorCambio = cambio;\n    montoAcumulado = 0;\n} else if (cambio < 0) {\n    valorCambio = 0;\n} else if (cambio === 0) {\n    valorCambio = \"Cobro Correcto! \" + cambio;\n}\n\nglobal.set(\"valorCambio\", valorCambio);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 2280,
        "wires": [
            [
                "44fc41ea426f7e44",
                "227257c4cd62b6bd"
            ]
        ]
    },
    {
        "id": "646f489f6014903a",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "cambio",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "cambio",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 2240,
        "wires": []
    },
    {
        "id": "8ca0704449e96c09",
        "type": "delay",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "pauseType": "delayv",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 2080,
        "wires": [
            [
                "646f489f6014903a"
            ]
        ]
    },
    {
        "id": "227257c4cd62b6bd",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 33",
        "func": "var valorCambio = global.get(\"valorCambio\");\n\nmsg.cambio= valorCambio;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 2220,
        "wires": [
            [
                "646f489f6014903a"
            ]
        ]
    },
    {
        "id": "79f3dd6f6362a41d",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 2380,
        "wires": []
    },
    {
        "id": "808a09f890d907d8",
        "type": "delay",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "pauseType": "delayv",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 2280,
        "wires": [
            [
                "3ce786711f55f5ea"
            ]
        ]
    },
    {
        "id": "f59cd5b2ab06f590",
        "type": "ui_text",
        "z": "a74a8b3a13ece5db",
        "group": "25b503f9b6a954f4",
        "order": 9,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Devolver Monedas :",
        "format": "{{msg.cambio}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1080,
        "y": 680,
        "wires": []
    },
    {
        "id": "8f9c6006075a1e64",
        "type": "ui_button",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "group": "25b503f9b6a954f4",
        "order": 4,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 10",
        "tooltip": "",
        "color": "White",
        "bgcolor": "Black",
        "className": "",
        "icon": "",
        "payload": "button_10",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1000,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "b2493482db4ee3a8",
        "type": "ui_button",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "group": "25b503f9b6a954f4",
        "order": 5,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 5",
        "tooltip": "",
        "color": "White",
        "bgcolor": "Black",
        "className": "",
        "icon": "",
        "payload": "button_5",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1040,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "13ad01d437eb9d0f",
        "type": "ui_button",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "group": "25b503f9b6a954f4",
        "order": 6,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 2",
        "tooltip": "",
        "color": "White",
        "bgcolor": "Black",
        "className": "",
        "icon": "",
        "payload": "button_2",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1080,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "56550d896dfb4c36",
        "type": "ui_button",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "group": "25b503f9b6a954f4",
        "order": 7,
        "width": "3",
        "height": "1",
        "passthru": false,
        "label": "$ 1",
        "tooltip": "",
        "color": "White",
        "bgcolor": "Black",
        "className": "",
        "icon": "",
        "payload": "button_1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 1120,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "2cbf914452c372b9",
        "type": "ui_text",
        "z": "a74a8b3a13ece5db",
        "group": "25b503f9b6a954f4",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Total Ingresado :",
        "format": "{{msg.montoAcumulado}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 520,
        "y": 1020,
        "wires": []
    },
    {
        "id": "5a74ce9552d7effc",
        "type": "switch",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "property": "salidaResultado",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Completo",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SeguirSumando",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 690,
        "y": 1080,
        "wires": [
            [
                "0dcfe7433cbd0d33"
            ],
            [
                "5a9a09e5c948605d"
            ]
        ]
    },
    {
        "id": "e170a8cfcc6537bd",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "ResetMonedas",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 1200,
        "wires": [
            [
                "522a2fd6be6f7106"
            ]
        ]
    },
    {
        "id": "522a2fd6be6f7106",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 35",
        "func": "    msg.payload = \"ResetMonedas\"\nmsg.cambio= 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1200,
        "wires": [
            [
                "275445c238891cef",
                "ae95980557cf6738"
            ]
        ]
    },
    {
        "id": "2c482131a433a4bc",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 36",
        "func": "let  monedasOK ;\nvar precioSanit = 10 ;\nvar montoAcumulado = global.get('montoAcumulado');\n\nif (montoAcumulado >= precioSanit){\n    monedasOK= montoAcumulado;\n    msg.salidaResultado= \"Completo\";\n    monedasOK = monedasOK - precioSanit;\n    msg.muestraResultado = monedasOK;\n}else{\n    msg.salidaResultado= 'SeguirSumando';\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1080,
        "wires": [
            [
                "5a74ce9552d7effc",
                "8121a72a5676f198"
            ]
        ]
    },
    {
        "id": "f90a2e947ee308f5",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "seguirContando",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 1100,
        "wires": []
    },
    {
        "id": "a2c4f78a0cf719ce",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "debug 26",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "completo",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 980,
        "y": 1020,
        "wires": []
    },
    {
        "id": "0dcfe7433cbd0d33",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 37",
        "func": "if (msg.salidaResultado == 'Completo'){\n    msg.completo='Completo';\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1060,
        "wires": [
            [
                "a2c4f78a0cf719ce",
                "3489325fdb068ff5"
            ]
        ]
    },
    {
        "id": "5a9a09e5c948605d",
        "type": "function",
        "z": "a74a8b3a13ece5db",
        "name": "function 38",
        "func": "if (msg.salidaResultado == 'SeguirSumando'){\n    msg.seguirContando='Seguir Contando';\n    msg.payload=0;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1100,
        "wires": [
            [
                "f90a2e947ee308f5"
            ]
        ]
    },
    {
        "id": "8121a72a5676f198",
        "type": "debug",
        "z": "a74a8b3a13ece5db",
        "name": "muestraResultado",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "muestraResultado",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 1020,
        "wires": []
    },
    {
        "id": "307b5df32e44e7e0",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "button_10",
        "payloadType": "str",
        "x": 160,
        "y": 820,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "5dbd8145f5fb7b4f",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "button_5",
        "payloadType": "str",
        "x": 160,
        "y": 860,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "e2d53cf4e478d580",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "button_2",
        "payloadType": "str",
        "x": 160,
        "y": 900,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "14c13d053a187b01",
        "type": "inject",
        "z": "a74a8b3a13ece5db",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "button_1",
        "payloadType": "str",
        "x": 160,
        "y": 940,
        "wires": [
            [
                "275445c238891cef"
            ]
        ]
    },
    {
        "id": "99e442ab8ddac763",
        "type": "link in",
        "z": "a74a8b3a13ece5db",
        "name": "link in 5",
        "links": [
            "17218d5d43c6662a"
        ],
        "x": 125,
        "y": 1300,
        "wires": [
            [
                "522a2fd6be6f7106"
            ]
        ]
    },
    {
        "id": "17218d5d43c6662a",
        "type": "link out",
        "z": "a74a8b3a13ece5db",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "99e442ab8ddac763"
        ],
        "x": 1405,
        "y": 1060,
        "wires": []
    },
    {
        "id": "ae95980557cf6738",
        "type": "link out",
        "z": "a74a8b3a13ece5db",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "97f2e36a32b004df"
        ],
        "x": 495,
        "y": 1200,
        "wires": []
    },
    {
        "id": "97f2e36a32b004df",
        "type": "link in",
        "z": "a74a8b3a13ece5db",
        "name": "link in 6",
        "links": [
            "ae95980557cf6738"
        ],
        "x": 1195,
        "y": 1200,
        "wires": [
            [
                "f5af16a96199d4d4"
            ]
        ]
    },
    {
        "id": "e12f8e3306b3fc1b",
        "type": "function",
        "z": "54a0b3a48a874218",
        "name": "function 19",
        "func": "var strCodBar = msg.req.params.etiqueta;\n\nmsg.topic = `select local from inv_loc where local= ${strCodBar}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 100,
        "wires": [
            [
                "69f6a4fb75e8672c"
            ]
        ]
    },
    {
        "id": "05d5d85123a0090c",
        "type": "http in",
        "z": "54a0b3a48a874218",
        "name": "",
        "url": "/wsImprimeE/:etiqueta",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 100,
        "wires": [
            [
                "e12f8e3306b3fc1b"
            ]
        ]
    },
    {
        "id": "4fd5f7dfd3322657",
        "type": "http response",
        "z": "54a0b3a48a874218",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 690,
        "y": 120,
        "wires": []
    },
    {
        "id": "420b3005851739a0",
        "type": "debug",
        "z": "54a0b3a48a874218",
        "name": "MENSAJES",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 80,
        "wires": []
    },
    {
        "id": "a9802ed7c7683746",
        "type": "function",
        "z": "54a0b3a48a874218",
        "name": "function 20",
        "func": "var strCodBar = msg.req.params.etiqueta;\n\nmsg.topic = `select local,precio,existencia from inv_loc where local= ${strCodBar}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 220,
        "wires": [
            [
                "3fb20b44b9917d46"
            ]
        ]
    },
    {
        "id": "d230d5b331f11886",
        "type": "http in",
        "z": "54a0b3a48a874218",
        "name": "",
        "url": "/wsImprimeExcel/:etiqueta",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 220,
        "wires": [
            [
                "a9802ed7c7683746"
            ]
        ]
    },
    {
        "id": "dbda53bcc3cfb0ea",
        "type": "http response",
        "z": "54a0b3a48a874218",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 730,
        "y": 240,
        "wires": []
    },
    {
        "id": "1f9db9e1313ad9b1",
        "type": "debug",
        "z": "54a0b3a48a874218",
        "name": "MENSAJES",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 200,
        "wires": []
    },
    {
        "id": "69f6a4fb75e8672c",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "54a0b3a48a874218",
        "name": "",
        "x": 550,
        "y": 100,
        "wires": [
            [
                "420b3005851739a0",
                "4fd5f7dfd3322657"
            ]
        ]
    },
    {
        "id": "3fb20b44b9917d46",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "54a0b3a48a874218",
        "name": "",
        "x": 590,
        "y": 220,
        "wires": [
            [
                "1f9db9e1313ad9b1",
                "dbda53bcc3cfb0ea"
            ]
        ]
    },
    {
        "id": "98de2cf4.8d4e1",
        "type": "inject",
        "z": "54a0b3a48a874218",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 380,
        "wires": [
            [
                "b0ad21b9.c3fb8"
            ]
        ]
    },
    {
        "id": "b0ad21b9.c3fb8",
        "type": "function",
        "z": "54a0b3a48a874218",
        "name": "Cobrar",
        "func": "var precio = 10;\nvar monedasIngresadas = flow.get('monedasIngresadas') || 0;\n\n// Simular error de ingreso de monedas de más\nif (monedasIngresadas >= precio) {\n    monedasIngresadas += 2;\n}\n\nvar cambio = monedasIngresadas - precio;\n\nreturn {\n    payload: {\n        precio: precio,\n        monedasIngresadas: monedasIngresadas,\n        cambio: cambio\n    }\n};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 380,
        "wires": [
            [
                "a3a5bdf5.166e48",
                "ee7c8a7.2e52e38"
            ]
        ]
    },
    {
        "id": "a3a5bdf5.166e48",
        "type": "debug",
        "z": "54a0b3a48a874218",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 560,
        "y": 380,
        "wires": []
    },
    {
        "id": "ee7c8a7.2e52e38",
        "type": "change",
        "z": "54a0b3a48a874218",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "monedasIngresadas",
                "pt": "flow",
                "to": "payload.monedasIngresadas",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "8539980f6f6597a5",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 3,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "1",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "1",
        "x": 1150,
        "y": 560,
        "wires": []
    },
    {
        "id": "0f3757d4254ac658",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 5,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "3",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "3",
        "x": 1150,
        "y": 640,
        "wires": []
    },
    {
        "id": "da33071c72e6a6a5",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 4,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "2",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "2",
        "x": 1150,
        "y": 600,
        "wires": []
    },
    {
        "id": "0bdbf06e02c32cc8",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 7,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "5",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "5",
        "x": 1150,
        "y": 720,
        "wires": []
    },
    {
        "id": "d343ba8d849fe63a",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad1",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[0] && datos[0].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 560,
        "wires": [
            [
                "3d9bc16245c24b6b",
                "9274a951f68fba37",
                "f34b10ee6179e2a1",
                "8539980f6f6597a5"
            ]
        ]
    },
    {
        "id": "a40525164afe8792",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnLockTable",
        "func": "\nmsg.topic = `lock table lugares_est read;`;\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 680,
        "wires": [
            [
                "a08378d0ba1dfe2e"
            ]
        ]
    },
    {
        "id": "a08378d0ba1dfe2e",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "aed7fdab8a3bd4f2",
        "name": "",
        "x": 170,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "a69c59f501cb9630",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSearchDisponibilidad",
        "func": "msg.topic = `select * from lugares_est  limit 30;`;\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 880,
        "wires": [
            [
                "e1f07461eecdf1b1"
            ]
        ]
    },
    {
        "id": "e1f07461eecdf1b1",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "aed7fdab8a3bd4f2",
        "name": "",
        "x": 170,
        "y": 920,
        "wires": [
            [
                "6969e0100c223ed9"
            ]
        ]
    },
    {
        "id": "cd40b742966d6c0e",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnUnlockTable",
        "func": "msg.topic = `unlock tables;`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "a6114467c260cec6",
        "type": "subflow:0cd476c06e8fa6b2",
        "z": "aed7fdab8a3bd4f2",
        "name": "",
        "x": 190,
        "y": 1280,
        "wires": [
            [
                "d343ba8d849fe63a",
                "570f3f98d03eec5c",
                "668a76b24f835cf9",
                "2d29274d198482b0",
                "52ad37c8fbaaaf50",
                "796b71d8d491ad04",
                "af018a302de1f7b4",
                "c34672349688222f",
                "e22a20a896c6fefa",
                "58577bd16c02d559",
                "f5963ac03c0fefa9",
                "a81e3e32be2ebbaf",
                "2169511176e86168",
                "37fa382ef6aa05b2",
                "7e21c5cc87065a44",
                "1e06e4666bf1776a",
                "b917623c8cae4379",
                "480251788c47996f",
                "324053f16a41ba1a",
                "a90b899e59c0291e",
                "a86ee00d637c6df2",
                "2f6bb0bcc0202f0c",
                "950fe45b9c2c1ad0",
                "686d16e4f2659f31",
                "0b49d5adf2a53b0c",
                "38eef3eaa0d79ce1",
                "a0453c59818f74fa",
                "8a9b227c204f1d7e",
                "729e1d6949452d83",
                "279eb9d61f021908"
            ]
        ]
    },
    {
        "id": "3d9bc16245c24b6b",
        "type": "debug",
        "z": "aed7fdab8a3bd4f2",
        "name": "debug name",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "name",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 420,
        "wires": []
    },
    {
        "id": "2616a5abd7c6bfdd",
        "type": "inject",
        "z": "aed7fdab8a3bd4f2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "2",
        "crontab": "",
        "once": false,
        "onceDelay": "4",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 840,
        "wires": [
            [
                "a69c59f501cb9630"
            ]
        ]
    },
    {
        "id": "6969e0100c223ed9",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSearchDisponibilidad",
        "func": "var datos = msg.payload;\nglobal.set(\"datos\",datos);\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 960,
        "wires": [
            [
                "903e673002d92605",
                "a6114467c260cec6"
            ]
        ]
    },
    {
        "id": "de36825e419627e2",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 6,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "4",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "4",
        "x": 1150,
        "y": 680,
        "wires": []
    },
    {
        "id": "9274a951f68fba37",
        "type": "debug",
        "z": "aed7fdab8a3bd4f2",
        "name": "debug payload",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 380,
        "wires": []
    },
    {
        "id": "f34b10ee6179e2a1",
        "type": "debug",
        "z": "aed7fdab8a3bd4f2",
        "name": "debug lugar",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "lugar",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 460,
        "wires": []
    },
    {
        "id": "903e673002d92605",
        "type": "debug",
        "z": "aed7fdab8a3bd4f2",
        "name": "debug 31",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 900,
        "wires": []
    },
    {
        "id": "570f3f98d03eec5c",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad2",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[1] && datos[1].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 600,
        "wires": [
            [
                "da33071c72e6a6a5"
            ]
        ]
    },
    {
        "id": "668a76b24f835cf9",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad5",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[4] && datos[4].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 720,
        "wires": [
            [
                "0bdbf06e02c32cc8"
            ]
        ]
    },
    {
        "id": "2d29274d198482b0",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad4",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[3] && datos[3].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 680,
        "wires": [
            [
                "de36825e419627e2"
            ]
        ]
    },
    {
        "id": "52ad37c8fbaaaf50",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad3",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[2] && datos[2].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 640,
        "wires": [
            [
                "0f3757d4254ac658"
            ]
        ]
    },
    {
        "id": "b063f988bd236a56",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 1,
        "group": "dadfe6c80b9c9c3a",
        "width": "3",
        "height": "1",
        "label": "Disponible",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "muestraDisponible",
        "x": 490,
        "y": 240,
        "wires": []
    },
    {
        "id": "f384eebad23df305",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 2,
        "group": "dadfe6c80b9c9c3a",
        "width": "3",
        "height": "1",
        "label": "No Disponible",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "muestraNoDisponible",
        "x": 500,
        "y": 280,
        "wires": []
    },
    {
        "id": "07064a6feed5171b",
        "type": "inject",
        "z": "aed7fdab8a3bd4f2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 130,
        "y": 240,
        "wires": [
            [
                "b063f988bd236a56"
            ]
        ]
    },
    {
        "id": "147915f26af6a19a",
        "type": "inject",
        "z": "aed7fdab8a3bd4f2",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 130,
        "y": 280,
        "wires": [
            [
                "f384eebad23df305"
            ]
        ]
    },
    {
        "id": "d8805a71a5c33aef",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 8,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "6",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "6",
        "x": 1150,
        "y": 780,
        "wires": []
    },
    {
        "id": "7ef9ccd61f7c4b9d",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 10,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "8",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "8",
        "x": 1150,
        "y": 860,
        "wires": []
    },
    {
        "id": "49f2b4e07cd1ab24",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 9,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "7",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "7",
        "x": 1150,
        "y": 820,
        "wires": []
    },
    {
        "id": "81cada87cbf1752b",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 12,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "10",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "10",
        "x": 1150,
        "y": 940,
        "wires": []
    },
    {
        "id": "796b71d8d491ad04",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad6",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[5] && datos[5].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 780,
        "wires": [
            [
                "d8805a71a5c33aef"
            ]
        ]
    },
    {
        "id": "6eddf0270d082a24",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 11,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "9",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "9",
        "x": 1150,
        "y": 900,
        "wires": []
    },
    {
        "id": "af018a302de1f7b4",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad7",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[6] && datos[6].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 820,
        "wires": [
            [
                "49f2b4e07cd1ab24"
            ]
        ]
    },
    {
        "id": "58577bd16c02d559",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad10",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[9] && datos[9].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 940,
        "wires": [
            [
                "81cada87cbf1752b"
            ]
        ]
    },
    {
        "id": "e22a20a896c6fefa",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad9",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[8] && datos[8].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 900,
        "wires": [
            [
                "6eddf0270d082a24"
            ]
        ]
    },
    {
        "id": "c34672349688222f",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad8",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[7] && datos[7].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 860,
        "wires": [
            [
                "7ef9ccd61f7c4b9d"
            ]
        ]
    },
    {
        "id": "cf88a08e4edf22da",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 13,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "11",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "11",
        "x": 1150,
        "y": 1000,
        "wires": []
    },
    {
        "id": "1eeb25697f820709",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 15,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "13",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "13",
        "x": 1150,
        "y": 1080,
        "wires": []
    },
    {
        "id": "6b7873dcc833fe57",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 14,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "12",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "12",
        "x": 1150,
        "y": 1040,
        "wires": []
    },
    {
        "id": "e84b1a1c8e137106",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 17,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "15",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "15",
        "x": 1150,
        "y": 1160,
        "wires": []
    },
    {
        "id": "f5963ac03c0fefa9",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad11",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[10] && datos[10].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1000,
        "wires": [
            [
                "cf88a08e4edf22da"
            ]
        ]
    },
    {
        "id": "d1904bfbd64beafa",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 16,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "14",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "14",
        "x": 1150,
        "y": 1120,
        "wires": []
    },
    {
        "id": "a81e3e32be2ebbaf",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad12",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[11] && datos[11].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1040,
        "wires": [
            [
                "6b7873dcc833fe57"
            ]
        ]
    },
    {
        "id": "7e21c5cc87065a44",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad15",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[14] && datos[14].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1160,
        "wires": [
            [
                "e84b1a1c8e137106"
            ]
        ]
    },
    {
        "id": "37fa382ef6aa05b2",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad14",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[13] && datos[13].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1120,
        "wires": [
            [
                "d1904bfbd64beafa"
            ]
        ]
    },
    {
        "id": "2169511176e86168",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad13",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[12] && datos[12].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1080,
        "wires": [
            [
                "1eeb25697f820709"
            ]
        ]
    },
    {
        "id": "7596d32603486d05",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 18,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "16",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "16",
        "x": 1150,
        "y": 1220,
        "wires": []
    },
    {
        "id": "a10c545233367302",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 20,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "18",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "18",
        "x": 1150,
        "y": 1300,
        "wires": []
    },
    {
        "id": "40d6ce0e154b667c",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 19,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "17",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "17",
        "x": 1150,
        "y": 1260,
        "wires": []
    },
    {
        "id": "3b0b3bc81f701f35",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 22,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "20",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "20",
        "x": 1150,
        "y": 1380,
        "wires": []
    },
    {
        "id": "1e06e4666bf1776a",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad16",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[15] && datos[15].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1220,
        "wires": [
            [
                "7596d32603486d05"
            ]
        ]
    },
    {
        "id": "1e0dc6dacc7c99ff",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 21,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "19",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "19",
        "x": 1150,
        "y": 1340,
        "wires": []
    },
    {
        "id": "b917623c8cae4379",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad17",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[16] && datos[16].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1260,
        "wires": [
            [
                "40d6ce0e154b667c"
            ]
        ]
    },
    {
        "id": "a90b899e59c0291e",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad20",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[19] && datos[4].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1380,
        "wires": [
            [
                "3b0b3bc81f701f35"
            ]
        ]
    },
    {
        "id": "324053f16a41ba1a",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad19",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[18] && datos[18].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1340,
        "wires": [
            [
                "1e0dc6dacc7c99ff"
            ]
        ]
    },
    {
        "id": "480251788c47996f",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad18",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[17] && datos[17].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1300,
        "wires": [
            [
                "a10c545233367302"
            ]
        ]
    },
    {
        "id": "2169266269f68f64",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 23,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "21",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "21",
        "x": 1150,
        "y": 1440,
        "wires": []
    },
    {
        "id": "1a026254e1b25ac7",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 25,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "23",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "23",
        "x": 1150,
        "y": 1520,
        "wires": []
    },
    {
        "id": "bd12b64196660fd6",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 24,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "22",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "22",
        "x": 1150,
        "y": 1480,
        "wires": []
    },
    {
        "id": "6913026298833704",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 27,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "25",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "25",
        "x": 1150,
        "y": 1600,
        "wires": []
    },
    {
        "id": "a86ee00d637c6df2",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad21",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[20] && datos[20].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1440,
        "wires": [
            [
                "2169266269f68f64"
            ]
        ]
    },
    {
        "id": "4428c0b841cc4cdf",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 26,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "24",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "24",
        "x": 1150,
        "y": 1560,
        "wires": []
    },
    {
        "id": "2f6bb0bcc0202f0c",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad22",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[21] && datos[21].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1480,
        "wires": [
            [
                "bd12b64196660fd6"
            ]
        ]
    },
    {
        "id": "0b49d5adf2a53b0c",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad25",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[24] && datos[24].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1600,
        "wires": [
            [
                "6913026298833704"
            ]
        ]
    },
    {
        "id": "686d16e4f2659f31",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad24",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[23] && datos[23].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1560,
        "wires": [
            [
                "4428c0b841cc4cdf"
            ]
        ]
    },
    {
        "id": "950fe45b9c2c1ad0",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad23",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[22] && datos[22].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1520,
        "wires": [
            [
                "1a026254e1b25ac7"
            ]
        ]
    },
    {
        "id": "f82aa1849d9b3fe2",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 28,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "26",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "26",
        "x": 1150,
        "y": 1660,
        "wires": []
    },
    {
        "id": "9a66173fcf3a1928",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 30,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "28",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "28",
        "x": 1150,
        "y": 1740,
        "wires": []
    },
    {
        "id": "82e549f0a8ee6669",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 29,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "27",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "27",
        "x": 1150,
        "y": 1700,
        "wires": []
    },
    {
        "id": "e90667031e1e2d18",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 32,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "30",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "30",
        "x": 1150,
        "y": 1820,
        "wires": []
    },
    {
        "id": "38eef3eaa0d79ce1",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad26",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[25] && datos[25].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1660,
        "wires": [
            [
                "f82aa1849d9b3fe2"
            ]
        ]
    },
    {
        "id": "a5faa44ae9173f79",
        "type": "ui_led",
        "z": "aed7fdab8a3bd4f2",
        "order": 31,
        "group": "dadfe6c80b9c9c3a",
        "width": "2",
        "height": "1",
        "label": "29",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "29",
        "x": 1150,
        "y": 1780,
        "wires": []
    },
    {
        "id": "a0453c59818f74fa",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad27",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[26] && datos[26].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1700,
        "wires": [
            [
                "82e549f0a8ee6669"
            ]
        ]
    },
    {
        "id": "279eb9d61f021908",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad30",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[29] && datos[29].estatus;\n\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1820,
        "wires": [
            [
                "e90667031e1e2d18"
            ]
        ]
    },
    {
        "id": "729e1d6949452d83",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad29",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[28] && datos[28].estatus;\n\nmsg.estatus = estatus;\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1780,
        "wires": [
            [
                "a5faa44ae9173f79"
            ]
        ]
    },
    {
        "id": "8a9b227c204f1d7e",
        "type": "function",
        "z": "aed7fdab8a3bd4f2",
        "name": "fnSalidad28",
        "func": "var datos = global.get(\"datos\")\nvar estatus = datos && datos[27] && datos[27].estatus;\n\nif(estatus== 'DISPONIBLE'){\n    msg.payload = true;\n}else if (estatus == 'OCUPADO'){\n    msg.payload = false;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1740,
        "wires": [
            [
                "9a66173fcf3a1928"
            ]
        ]
    },
    {
        "id": "360e2d35.417162",
        "type": "tcp out",
        "z": "55ba811a.d1969",
        "name": "",
        "host": "192.168.4.1",
        "port": "8080",
        "beserver": "client",
        "base64": false,
        "end": false,
        "tls": "",
        "x": 740,
        "y": 280,
        "wires": []
    },
    {
        "id": "3ae9a13a.1f7b1e",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "ON RELE 1",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"0xA0\",\"0x01\",\"0x01\",\"0xA2\"]",
        "payloadType": "bin",
        "x": 150,
        "y": 300,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "426470a3.8d8b7",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "OFF RELE 1",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": " [\"0xA0\",\"0x01\",\"0x00\",\"0xA1\"]",
        "payloadType": "bin",
        "x": 150,
        "y": 260,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "3c6cebe3.f50544",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "ON RELE 2",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"0xA0\",\"0x02\",\"0x01\",\"0xA3\"]",
        "payloadType": "bin",
        "x": 150,
        "y": 400,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "369cb586.03adea",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "OFF RELE 2",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"0xA0\",\"0x02\",\"0x00\",\"0xA2\"]",
        "payloadType": "bin",
        "x": 150,
        "y": 360,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "8b6f6941.41def8",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "ON RELE 3",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": " [\"0xA0\",\"0x03\",\"0x01\",\"0xA4\"]",
        "payloadType": "bin",
        "x": 330,
        "y": 500,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "5d0efad6.a98434",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "OFF RELE 3",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"0xA0\",\"0x03\",\"0x00\",\"0xA3\"]",
        "payloadType": "bin",
        "x": 330,
        "y": 460,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "31d1b508.c7075a",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "ON RELE 4",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"0xA0\",\"0x04\",\"0x01\",\"0xA5\"]",
        "payloadType": "bin",
        "x": 670,
        "y": 500,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "33bc1ff2.3d252",
        "type": "inject",
        "z": "55ba811a.d1969",
        "name": "OFF RELE 4",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": " [\"0xA0\",\"0x04\",\"0x00\",\"0xA4\"]",
        "payloadType": "bin",
        "x": 670,
        "y": 460,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "cb9f4579.c424b8",
        "type": "ui_switch",
        "z": "55ba811a.d1969",
        "name": "",
        "label": "RELE 01",
        "tooltip": "",
        "group": "481533c8.0110ec",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "topicType": "str",
        "style": "",
        "onvalue": "[\"0xA0\",\"0x01\",\"0x01\",\"0xA2\"]",
        "onvalueType": "bin",
        "onicon": "",
        "oncolor": "",
        "offvalue": "[\"0xA0\",\"0x01\",\"0x00\",\"0xA1\"]",
        "offvalueType": "bin",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 300,
        "y": 80,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "600ec857.15b108",
        "type": "ui_switch",
        "z": "55ba811a.d1969",
        "name": "",
        "label": "RELE 02",
        "tooltip": "",
        "group": "481533c8.0110ec",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "[\"0xA0\",\"0x02\",\"0x01\",\"0xA3\"]",
        "onvalueType": "bin",
        "onicon": "",
        "oncolor": "",
        "offvalue": "[\"0xA0\",\"0x02\",\"0x00\",\"0xA2\"]",
        "offvalueType": "bin",
        "officon": "",
        "offcolor": "",
        "x": 300,
        "y": 120,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "70e71b09.e116a4",
        "type": "ui_switch",
        "z": "55ba811a.d1969",
        "name": "",
        "label": "RELE 03",
        "tooltip": "",
        "group": "481533c8.0110ec",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": " [\"0xA0\",\"0x03\",\"0x01\",\"0xA4\"]",
        "onvalueType": "bin",
        "onicon": "",
        "oncolor": "",
        "offvalue": "  [\"0xA0\",\"0x03\",\"0x00\",\"0xA3\"]",
        "offvalueType": "bin",
        "officon": "",
        "offcolor": "",
        "x": 300,
        "y": 160,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    },
    {
        "id": "f8426c39.d0631",
        "type": "ui_switch",
        "z": "55ba811a.d1969",
        "name": "",
        "label": "RELE 04",
        "tooltip": "",
        "group": "481533c8.0110ec",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "[\"0xA0\",\"0x04\",\"0x01\",\"0xA5\"]",
        "onvalueType": "bin",
        "onicon": "",
        "oncolor": "",
        "offvalue": "[\"0xA0\",\"0x04\",\"0x00\",\"0xA4\"]",
        "offvalueType": "bin",
        "officon": "",
        "offcolor": "",
        "x": 300,
        "y": 200,
        "wires": [
            [
                "360e2d35.417162"
            ]
        ]
    }
]